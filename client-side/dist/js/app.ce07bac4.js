(function(e){function t(t){for(var i,s,a=t[0],l=t[1],c=t[2],d=0,m=[];d<a.length;d++)s=a[d],o[s]&&m.push(o[s][0]),o[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);u&&u(t);while(m.length)m.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,s=1;s<n.length;s++){var l=n[s];0!==o[l]&&(i=!1)}i&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var i={},o={app:0},r=[];function s(e){return a.p+"js/"+({"pdfjs-dist":"pdfjs-dist",pdfjsWorker:"pdfjsWorker"}[e]||e)+"."+{"pdfjs-dist":"93589680",pdfjsWorker:"dbc92620"}[e]+".js"}function a(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,i){n=o[e]=[t,i]}));t.push(n[2]=i);var r,l=document.createElement("script");l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.src=s(e),r=function(t){l.onerror=l.onload=null,clearTimeout(c);var n=o[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,s=new Error("Loading chunk "+e+" failed.\n("+i+": "+r+")");s.type=i,s.request=r,n[1](s)}o[e]=void 0}};var c=setTimeout((function(){r({type:"timeout",target:l})}),12e4);l.onerror=l.onload=r,document.head.appendChild(l)}return Promise.all(t)},a.m=e,a.c=i,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var u=c;r.push([1,"chunk-vendors"]),n()})({0:function(e,t){},"07bb":function(e,t,n){},1:function(e,t,n){e.exports=n("56d7")},2:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);var i=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}},[n("link",{attrs:{rel:"stylesheet",href:"https://use.fontawesome.com/releases/v5.2.0/css/all.css",integrity:"sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ",crossorigin:"anonymous"}}),n("h3",[n("router-link",{attrs:{to:"/pdf"}},[e._v("Feedback tool")]),e._v(" |\n      "),n("router-link",{attrs:{to:"/database"}},[e._v("Database")])],1)]),n("router-view")],1)},r=[],s=(n("60bc"),n("b0a0"),n("2877")),a={},l=Object(s["a"])(a,o,r,!1,null,null,null),c=l.exports,d=n("8c4f"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-fluid"},[n("modal",{staticStyle:{background:"transparent"},attrs:{name:"fault-popup",height:"150",width:"900"}},[n("div",{staticStyle:{"text-align":"center"}},[n("br"),n("h3",[e._v(e._s(this.faultMessage))])])]),n("modal",{staticStyle:{background:"transparent"},attrs:{name:"warning-popup",height:"270"}},[n("div",{staticClass:"col-md-12 form-wrapper",staticStyle:{"text-align":"center"}},[n("br"),n("h2",[e._v("Are you sure you want to import a new database?")]),n("br"),n("h2",[e._v("The current data in the database will be lost.")]),n("div",{staticClass:"form-group col-md-4 pull-right"},[n("button",{staticClass:"btn btn-success",on:{click:e.triggerUpload}},[e._v(" Yes ")]),n("button",{staticClass:"btn btn-success",attrs:{id:"cancelButton"},on:{click:e.hideImportWarning}},[e._v(" No ")])])])]),n("modal",{staticStyle:{background:"transparent"},attrs:{name:"create-errortype",height:"600"},on:{closed:e.hideErrorTypePopup}},[n("div",{staticClass:"col-md-12 form-wrapper",staticStyle:{"text-align":"center"}},[n("br"),"create"==e.modus?n("h2",[e._v(" Create Errortype ")]):e._e(),"edit"==e.modus?n("h2",[e._v(" Edit Errortype ")]):e._e(),n("div",{staticClass:"form-group col-md-12"},[n("label",{attrs:{for:"title"}},[e._v(" Name ")]),"create"==e.modus?n("input",{directives:[{name:"model",rawName:"v-model",value:e.errorName,expression:"errorName"}],staticClass:"form-control",staticStyle:{border:"2px solid red"},attrs:{type:"text",id:"name",name:"title",placeholder:"Enter name"},domProps:{value:e.errorName},on:{input:[function(t){t.target.composing||(e.errorName=t.target.value)},e.changeInErrorType]}}):e._e(),"edit"==e.modus?n("input",{directives:[{name:"model",rawName:"v-model",value:e.errorName,expression:"errorName"}],staticClass:"form-control",staticStyle:{border:"2px solid green"},attrs:{type:"text",id:"name",name:"title",placeholder:"Enter name"},domProps:{value:e.errorName},on:{input:[function(t){t.target.composing||(e.errorName=t.target.value)},e.changeInErrorType]}}):e._e()]),n("div",{staticClass:"form-group col-md-12"},[n("label",{attrs:{for:"title"}},[e._v(" Weight ")]),"create"==e.modus?n("input",{directives:[{name:"model",rawName:"v-model",value:e.errorWeight,expression:"errorWeight"}],staticClass:"form-control",staticStyle:{border:"2px solid red"},attrs:{type:"text",id:"weight",name:"title",placeholder:"Enter weight"},domProps:{value:e.errorWeight},on:{input:[function(t){t.target.composing||(e.errorWeight=t.target.value)},e.changeInErrorType]}}):e._e(),"edit"==e.modus?n("input",{directives:[{name:"model",rawName:"v-model",value:e.errorWeight,expression:"errorWeight"}],staticClass:"form-control",staticStyle:{border:"2px solid green"},attrs:{type:"text",id:"weight",name:"title",placeholder:"Enter weight"},domProps:{value:e.errorWeight},on:{input:[function(t){t.target.composing||(e.errorWeight=t.target.value)},e.changeInErrorType]}}):e._e()]),n("div",{staticClass:"form-group col-md-12"},[n("label",{attrs:{for:"description"}},[e._v(" Description ")]),"create"==e.modus?n("input",{directives:[{name:"model",rawName:"v-model",value:e.errorDescription,expression:"errorDescription"}],staticClass:"form-control",staticStyle:{border:"2px solid red"},attrs:{type:"text",id:"description",name:"description",placeholder:"Enter description"},domProps:{value:e.errorDescription},on:{input:[function(t){t.target.composing||(e.errorDescription=t.target.value)},e.changeInErrorType]}}):e._e(),"edit"==e.modus?n("input",{directives:[{name:"model",rawName:"v-model",value:e.errorDescription,expression:"errorDescription"}],staticClass:"form-control",staticStyle:{border:"2px solid green"},attrs:{type:"text",id:"description",name:"description",placeholder:"Enter description"},domProps:{value:e.errorDescription},on:{input:[function(t){t.target.composing||(e.errorDescription=t.target.value)},e.changeInErrorType]}}):e._e()]),n("label",{attrs:{for:"learningOutcome"}},[e._v(" Learning outcome ")]),n("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[n("div",{staticStyle:{width:"435px",border:"2px solid green",display:"flex","align-items":"center","justify-content":"center"},attrs:{id:"dropdown"}},[n("multiselect",{staticStyle:{width:"435px"},attrs:{options:Object.values(e.dropdownLearningOutcomes),maxHeight:180,placeholder:"Select learning outcome"},on:{input:e.changeInErrorType},model:{value:e.selectedLearningOutcome,callback:function(t){e.selectedLearningOutcome=t},expression:"selectedLearningOutcome"}})],1)]),n("br"),n("div",{staticClass:"form-group col-md-4 pull-right"},["create"==e.modus?n("button",{staticClass:"btn btn-success",on:{click:e.pushErrorType}},[e._v(" Create new errortype ")]):e._e(),"edit"==e.modus?n("button",{staticClass:"btn btn-success",on:{click:e.pushErrorType}},[e._v(" Edit errortype ")]):e._e(),n("button",{staticClass:"btn btn-success",attrs:{id:"cancelButton"},on:{click:e.hideErrorTypePopup}},[e._v(" Cancel ")])])])]),n("modal",{staticStyle:{background:"transparent"},attrs:{name:"create-learningoutcome",height:"780"},on:{closed:e.hideLearningOutcomePopup}},[n("div",{staticClass:"col-md-12 form-wrapper",staticStyle:{"text-align":"center"}},[n("br"),"create"==e.modus?n("h2",[e._v(" Create learning outcome ")]):e._e(),"edit"==e.modus?n("h2",[e._v(" Edit learning outcome ")]):e._e(),n("div",{staticClass:"form-group col-md-12"},[n("label",{attrs:{for:"title"}},[e._v(" Learning outcome ")]),"create"==e.modus?n("input",{directives:[{name:"model",rawName:"v-model",value:e.learningName,expression:"learningName"}],staticClass:"form-control",staticStyle:{border:"2px solid red"},attrs:{type:"text",id:"learningName",name:"title",placeholder:"Enter name"},domProps:{value:e.learningName},on:{input:[function(t){t.target.composing||(e.learningName=t.target.value)},e.changeInLearningOutcome]}}):e._e(),"edit"==e.modus?n("input",{directives:[{name:"model",rawName:"v-model",value:e.learningName,expression:"learningName"}],staticClass:"form-control",staticStyle:{border:"2px solid green"},attrs:{type:"text",id:"learningName",name:"title",placeholder:"Enter name"},domProps:{value:e.learningName},on:{input:[function(t){t.target.composing||(e.learningName=t.target.value)},e.changeInLearningOutcome]}}):e._e()]),n("div",{staticClass:"form-group col-md-12"},[n("label",{attrs:{for:"title"}},[e._v(" BloomLevel Cognitive ")]),"create"==e.modus?n("input",{directives:[{name:"model",rawName:"v-model",value:e.learningBloomLevelCognitive,expression:"learningBloomLevelCognitive"}],staticClass:"form-control",staticStyle:{border:"2px solid red"},attrs:{type:"text",id:"learningBloomLevelCognitive",name:"title",placeholder:"Enter BloomLevel Cognitive"},domProps:{value:e.learningBloomLevelCognitive},on:{input:[function(t){t.target.composing||(e.learningBloomLevelCognitive=t.target.value)},e.changeInLearningOutcome]}}):e._e(),"edit"==e.modus?n("input",{directives:[{name:"model",rawName:"v-model",value:e.learningBloomLevelCognitive,expression:"learningBloomLevelCognitive"}],staticClass:"form-control",staticStyle:{border:"2px solid green"},attrs:{type:"text",id:"learningBloomLevelCognitive",name:"title",placeholder:"Enter BloomLevel Cognitive"},domProps:{value:e.learningBloomLevelCognitive},on:{input:[function(t){t.target.composing||(e.learningBloomLevelCognitive=t.target.value)},e.changeInLearningOutcome]}}):e._e()]),n("div",{staticClass:"form-group col-md-12"},[n("label",{attrs:{for:"description"}},[e._v(" BloomLevel Knowledge ")]),"create"==e.modus?n("input",{directives:[{name:"model",rawName:"v-model",value:e.learningBloomLevelKnowledge,expression:"learningBloomLevelKnowledge"}],staticClass:"form-control",staticStyle:{border:"2px solid red"},attrs:{type:"text",id:"learningBloomLevelKnowledge",name:"description",placeholder:"Enter BloomLevel Knowledge"},domProps:{value:e.learningBloomLevelKnowledge},on:{input:[function(t){t.target.composing||(e.learningBloomLevelKnowledge=t.target.value)},e.changeInLearningOutcome]}}):e._e(),"edit"==e.modus?n("input",{directives:[{name:"model",rawName:"v-model",value:e.learningBloomLevelKnowledge,expression:"learningBloomLevelKnowledge"}],staticClass:"form-control",staticStyle:{border:"2px solid green"},attrs:{type:"text",id:"learningBloomLevelKnowledge",name:"description",placeholder:"Enter BloomLevel Knowledge"},domProps:{value:e.learningBloomLevelKnowledge},on:{input:[function(t){t.target.composing||(e.learningBloomLevelKnowledge=t.target.value)},e.changeInLearningOutcome]}}):e._e()]),n("label",{attrs:{for:"description"}},[e._v(" Learning item(s) ")]),n("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[n("div",{staticStyle:{width:"435px",border:"2px solid green",display:"flex","align-items":"center","justify-content":"center"}},[n("multiselect",{staticStyle:{width:"435px"},attrs:{options:Object.values(e.dropdownLearningItems),maxHeight:180,placeholder:"Select learning item",multiple:!0},on:{input:e.changeInLearningOutcome},model:{value:e.selectedLearningItems,callback:function(t){e.selectedLearningItems=t},expression:"selectedLearningItems"}})],1)]),n("br"),n("label",{attrs:{for:"description"}},[e._v(" Content Section(s) ")]),n("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[n("div",{staticStyle:{width:"435px",border:"2px solid green",display:"flex","align-items":"center","justify-content":"center"}},[n("multiselect",{staticStyle:{width:"435px"},attrs:{options:Object.values(e.dropdownContentSections),maxHeight:180,placeholder:"Select content section",multiple:!0},on:{input:e.changeInLearningOutcome},model:{value:e.selectedContentSections,callback:function(t){e.selectedContentSections=t},expression:"selectedContentSections"}})],1)]),n("br"),n("label",{attrs:{for:"description"}},[e._v(" Domain Concept(s) ")]),n("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[n("div",{staticStyle:{width:"435px",border:"2px solid green",display:"flex","align-items":"center","justify-content":"center"}},[n("multiselect",{staticStyle:{width:"435px"},attrs:{options:Object.values(e.dropdownDomainConcepts),maxHeight:180,placeholder:"Select domain concept(s)",multiple:!0},on:{input:e.changeInLearningOutcome},model:{value:e.selectedDomainConcepts,callback:function(t){e.selectedDomainConcepts=t},expression:"selectedDomainConcepts"}})],1)]),n("br"),n("br"),n("br"),n("br"),n("div",{staticClass:"form-group col-md-4 pull-right"},["create"==e.modus?n("button",{staticClass:"btn btn-success",on:{click:e.pushLearningOutcome}},[e._v(" Create new learning outcome ")]):e._e(),"edit"==e.modus?n("button",{staticClass:"btn btn-success",on:{click:e.pushLearningOutcome}},[e._v(" Edit learning outcome ")]):e._e(),n("button",{staticClass:"btn btn-success",attrs:{id:"cancelButton"},on:{click:e.hideLearningOutcomePopup}},[e._v(" Cancel ")])])])]),n("modal",{staticStyle:{background:"transparent"},attrs:{name:"create-learningitem",height:"720"},on:{closed:e.hideLearningItemPopup}},[n("div",{staticClass:"col-md-12 form-wrapper",staticStyle:{"text-align":"center"}},[n("br"),"create"==e.modus?n("h2",[e._v(" Create learning item ")]):e._e(),"edit"==e.modus?n("h2",[e._v(" Edit learning item ")]):e._e(),n("div",{staticClass:"form-group col-md-12"},[n("label",{attrs:{for:"title"}},[e._v(" Learning item ")]),"create"==e.modus?n("input",{directives:[{name:"model",rawName:"v-model",value:e.learningItemName,expression:"learningItemName"}],staticClass:"form-control",staticStyle:{border:"2px solid red"},attrs:{type:"text",id:"learningItemName",name:"title",placeholder:"Enter name"},domProps:{value:e.learningItemName},on:{input:[function(t){t.target.composing||(e.learningItemName=t.target.value)},e.changeInLearningItem]}}):e._e(),"edit"==e.modus?n("input",{directives:[{name:"model",rawName:"v-model",value:e.learningItemName,expression:"learningItemName"}],staticClass:"form-control",staticStyle:{border:"2px solid green"},attrs:{type:"text",id:"learningItemName",name:"title",placeholder:"Enter name"},domProps:{value:e.learningItemName},on:{input:[function(t){t.target.composing||(e.learningItemName=t.target.value)},e.changeInLearningItem]}}):e._e()]),n("div",{staticClass:"form-group col-md-12"},[n("label",{attrs:{for:"title"}},[e._v(" URL ")]),"create"==e.modus?n("input",{directives:[{name:"model",rawName:"v-model",value:e.learningItemURL,expression:"learningItemURL"}],staticClass:"form-control",staticStyle:{border:"2px solid red"},attrs:{type:"text",id:"learningItemURL",name:"title",placeholder:"Enter URL"},domProps:{value:e.learningItemURL},on:{input:[function(t){t.target.composing||(e.learningItemURL=t.target.value)},e.changeInLearningItem]}}):e._e(),"edit"==e.modus?n("input",{directives:[{name:"model",rawName:"v-model",value:e.learningItemURL,expression:"learningItemURL"}],staticClass:"form-control",staticStyle:{border:"2px solid green"},attrs:{type:"text",id:"learningItemURL",name:"title",placeholder:"Enter URL"},domProps:{value:e.learningItemURL},on:{input:[function(t){t.target.composing||(e.learningItemURL=t.target.value)},e.changeInLearningItem]}}):e._e()]),n("div",{staticClass:"form-group col-md-12"},[n("label",{attrs:{for:"title"}},[e._v(" Is an exercise item? "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.learningItemIsExercise,expression:"learningItemIsExercise"}],attrs:{type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(e.learningItemIsExercise)?e._i(e.learningItemIsExercise,null)>-1:e.learningItemIsExercise},on:{input:e.changeInLearningItem,change:function(t){var n=e.learningItemIsExercise,i=t.target,o=!!i.checked;if(Array.isArray(n)){var r=null,s=e._i(n,r);i.checked?s<0&&(e.learningItemIsExercise=n.concat([r])):s>-1&&(e.learningItemIsExercise=n.slice(0,s).concat(n.slice(s+1)))}else e.learningItemIsExercise=o}}})])]),e.learningItemIsExercise?n("div",{staticClass:"form-group col-md-12"},[n("label",{attrs:{for:"description"}},[e._v(" Difficulty ")]),"create"==e.modus?n("input",{directives:[{name:"model",rawName:"v-model",value:e.learningItemDifficulty,expression:"learningItemDifficulty"}],staticClass:"form-control",staticStyle:{border:"2px solid red"},attrs:{type:"text",id:"learningItemDifficulty",name:"description",placeholder:"Enter difficulty"},domProps:{value:e.learningItemDifficulty},on:{input:[function(t){t.target.composing||(e.learningItemDifficulty=t.target.value)},e.changeInLearningItem]}}):e._e(),"edit"==e.modus&&e.learningItemDifficulty.length>0?n("input",{directives:[{name:"model",rawName:"v-model",value:e.learningItemDifficulty,expression:"learningItemDifficulty"}],staticClass:"form-control",staticStyle:{border:"2px solid green"},attrs:{type:"text",id:"learningItemDifficulty",name:"description",placeholder:"Enter difficulty"},domProps:{value:e.learningItemDifficulty},on:{input:[function(t){t.target.composing||(e.learningItemDifficulty=t.target.value)},e.changeInLearningItem]}}):e._e(),"edit"==e.modus&&e.learningItemDifficulty.length<1?n("input",{directives:[{name:"model",rawName:"v-model",value:e.learningItemDifficulty,expression:"learningItemDifficulty"}],staticClass:"form-control",staticStyle:{border:"2px solid red"},attrs:{type:"text",id:"learningItemDifficulty",name:"description",placeholder:"Enter difficulty"},domProps:{value:e.learningItemDifficulty},on:{input:[function(t){t.target.composing||(e.learningItemDifficulty=t.target.value)},e.changeInLearningItem]}}):e._e()]):e._e(),n("label",{attrs:{for:"description"}},[e._v(" Content Section(s) ")]),n("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[n("div",{staticStyle:{width:"435px",border:"2px solid green",display:"flex","align-items":"center","justify-content":"center"}},[n("multiselect",{staticStyle:{width:"435px"},attrs:{options:Object.values(e.dropdownContentSections),maxHeight:180,placeholder:"Select content section(s)",multiple:!0},on:{input:e.changeInLearningItem},model:{value:e.selectedContentSections,callback:function(t){e.selectedContentSections=t},expression:"selectedContentSections"}})],1)]),n("br"),n("label",{attrs:{for:"description"}},[e._v(" Domain Concept(s) ")]),n("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[n("div",{staticStyle:{width:"435px",border:"2px solid green",display:"flex","align-items":"center","justify-content":"center"}},[n("multiselect",{staticStyle:{width:"435px"},attrs:{options:Object.values(e.dropdownDomainConcepts),maxHeight:180,placeholder:"Select domain concept(s)",multiple:!0},on:{input:e.changeInLearningItem},model:{value:e.selectedDomainConcepts,callback:function(t){e.selectedDomainConcepts=t},expression:"selectedDomainConcepts"}})],1)]),n("br"),n("br"),n("br"),n("br"),n("div",{staticClass:"form-group col-md-4 pull-right"},["create"==e.modus?n("button",{staticClass:"btn btn-success",on:{click:e.pushLearningItem}},[e._v(" Create new learning item ")]):e._e(),"edit"==e.modus?n("button",{staticClass:"btn btn-success",on:{click:e.pushLearningItem}},[e._v(" Edit learning item ")]):e._e(),n("button",{staticClass:"btn btn-success",attrs:{id:"cancelButton"},on:{click:e.hideLearningItemPopup}},[e._v(" Cancel ")])])])]),n("modal",{staticStyle:{background:"transparent"},attrs:{name:"create-contentsection",height:"480"},on:{closed:e.hideContentSectionPopup}},[n("div",{staticClass:"col-md-12 form-wrapper",staticStyle:{"text-align":"center"}},[n("br"),"create"==e.modus?n("h2",[e._v(" Create content section ")]):e._e(),"edit"==e.modus?n("h2",[e._v(" Edit content section ")]):e._e(),n("div",{staticClass:"form-group col-md-12"},[n("label",{attrs:{for:"title"}},[e._v(" Content section ")]),"create"==e.modus?n("input",{directives:[{name:"model",rawName:"v-model",value:e.contentSectionName,expression:"contentSectionName"}],staticClass:"form-control",staticStyle:{border:"2px solid red"},attrs:{type:"text",id:"contentSectionName",name:"title",placeholder:"Enter name"},domProps:{value:e.contentSectionName},on:{input:[function(t){t.target.composing||(e.contentSectionName=t.target.value)},e.changeInContentSection]}}):e._e(),"edit"==e.modus?n("input",{directives:[{name:"model",rawName:"v-model",value:e.contentSectionName,expression:"contentSectionName"}],staticClass:"form-control",staticStyle:{border:"2px solid green"},attrs:{type:"text",id:"contentSectionName",name:"title",placeholder:"Enter name"},domProps:{value:e.contentSectionName},on:{input:[function(t){t.target.composing||(e.contentSectionName=t.target.value)},e.changeInContentSection]}}):e._e()]),n("label",{attrs:{for:"description"}},[e._v(" Domain Concept(s) ")]),n("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[null!=e.selectedDomainConcepts?n("div",{staticStyle:{width:"435px",border:"2px solid green",display:"flex","align-items":"center","justify-content":"center"},attrs:{id:"contentsection-dropdown"}},[n("multiselect",{staticStyle:{width:"435px"},attrs:{options:Object.values(e.dropdownDomainConcepts),maxHeight:180,placeholder:"Select domain concept(s)",multiple:!0},on:{input:e.changeInContentSection},model:{value:e.selectedDomainConcepts,callback:function(t){e.selectedDomainConcepts=t},expression:"selectedDomainConcepts"}})],1):e._e()]),n("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[null==e.selectedDomainConcepts?n("div",{staticStyle:{width:"435px",border:"2px solid red",display:"flex","align-items":"center","justify-content":"center"},attrs:{id:"contentsection-dropdown"}},[n("multiselect",{staticStyle:{width:"435px"},attrs:{options:Object.values(e.dropdownDomainConcepts),maxHeight:180,placeholder:"Select domain concept(s)",multiple:!0},on:{input:e.changeInContentSection},model:{value:e.selectedDomainConcepts,callback:function(t){e.selectedDomainConcepts=t},expression:"selectedDomainConcepts"}})],1):e._e()]),n("br"),n("br"),n("br"),n("br"),n("div",{staticClass:"form-group col-md-4 pull-right"},["create"==e.modus?n("button",{staticClass:"btn btn-success",on:{click:e.pushContentSection}},[e._v(" Create new content section ")]):e._e(),"edit"==e.modus?n("button",{staticClass:"btn btn-success",on:{click:e.pushContentSection}},[e._v(" Edit content section ")]):e._e(),n("button",{staticClass:"btn btn-success",attrs:{id:"cancelButton"},on:{click:e.hideContentSectionPopup}},[e._v(" Cancel ")])])])]),n("modal",{staticStyle:{background:"transparent"},attrs:{name:"create-domainconcept",height:"200"},on:{closed:e.hideDomainConceptPopup}},[n("div",{staticClass:"col-md-12 form-wrapper",staticStyle:{"text-align":"center"}},[n("br"),"create"==e.modus?n("h2",[e._v(" Create domain concept ")]):e._e(),"edit"==e.modus?n("h2",[e._v(" Edit domain concept ")]):e._e(),n("div",{staticClass:"form-group col-md-12"},["create"==e.modus?n("input",{directives:[{name:"model",rawName:"v-model",value:e.domainConceptName,expression:"domainConceptName"}],staticClass:"form-control",staticStyle:{border:"2px solid red"},attrs:{type:"text",id:"domainConceptName",name:"title",placeholder:"Enter name"},domProps:{value:e.domainConceptName},on:{input:[function(t){t.target.composing||(e.domainConceptName=t.target.value)},e.changeInDomainConcept]}}):e._e(),"edit"==e.modus?n("input",{directives:[{name:"model",rawName:"v-model",value:e.domainConceptName,expression:"domainConceptName"}],staticClass:"form-control",staticStyle:{border:"2px solid green"},attrs:{type:"text",id:"domainConceptName",name:"title",placeholder:"Enter name"},domProps:{value:e.domainConceptName},on:{input:[function(t){t.target.composing||(e.domainConceptName=t.target.value)},e.changeInDomainConcept]}}):e._e()]),n("div",{staticClass:"form-group col-md-4 pull-right"},["create"==e.modus?n("button",{staticClass:"btn btn-success",on:{click:e.pushDomainConcept}},[e._v(" Create new domain concept ")]):e._e(),"edit"==e.modus?n("button",{staticClass:"btn btn-success",on:{click:e.pushDomainConcept}},[e._v(" Edit domain concept ")]):e._e(),n("button",{staticClass:"btn btn-success",attrs:{id:"cancelButton"},on:{click:e.hideDomainConceptPopup}},[e._v(" Cancel ")])])])]),n("div",{staticClass:"sidebar"},[n("div",{attrs:{id:"import-export"}},[n("b",{attrs:{href:"#"}},[e._v("___________")]),n("br"),n("input",{attrs:{type:"file",id:"input-excel",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}),n("b",[n("p",[n("i",{staticClass:"fas fa-file-upload",staticStyle:{"font-size":"40px"},on:{click:e.importWarning}})]),e._v("Import database")]),n("b",{attrs:{href:"#"}},[e._v("___________")]),n("br"),n("b",[n("p",[n("i",{staticClass:"fas fa-file-download",staticStyle:{"font-size":"40px"},on:{click:e.exportDatabase}})]),e._v("Download database")]),n("b",{attrs:{href:"#"}},[e._v("___________")])]),n("br"),n("b",[n("p",[n("i",{staticClass:"fas fa-trash-alt",staticStyle:{"font-size":"40px"},on:{click:e.deleteSelection}})]),e._v("Delete selection")]),n("b",{attrs:{href:"#"}},[e._v("___________")]),n("div",{staticClass:"create"},[n("br"),"errortype"==e.database?n("b",[n("p",[n("i",{staticClass:"fas fa-plus-square",staticStyle:{"font-size":"40px"},on:{click:e.newError}})]),e._v("Create error")]):e._e(),"learningoutcome"==e.database?n("b",[n("p",[n("i",{staticClass:"fas fa-plus-square",staticStyle:{"font-size":"40px"},on:{click:e.newLearningOutcome}})]),e._v("Create learning outcome")]):e._e(),"contentsection"==e.database?n("b",[n("p",[n("i",{staticClass:"fas fa-plus-square",staticStyle:{"font-size":"40px"},on:{click:e.newContentSection}})]),e._v("Create content section")]):e._e(),"domainconcept"==e.database?n("b",[n("p",[n("i",{staticClass:"fas fa-plus-square",staticStyle:{"font-size":"40px"},on:{click:e.newDomainConcept}})]),e._v("Create domain concept")]):e._e(),"learningitem"==e.database?n("b",[n("p",[n("i",{staticClass:"fas fa-plus-square",staticStyle:{"font-size":"40px"},on:{click:e.newLearningItem}})]),e._v("Create learning item")]):e._e(),n("b",{attrs:{href:"#"}},[e._v("___________")])])]),n("div",{attrs:{id:"core"}},[n("br"),n("div",[n("button",{staticClass:"btn btn-success",attrs:{id:"errortype-database"},on:{click:function(t){e.changeDatabase("errortype")}}},[e._v(" Errortypes ")]),n("button",{staticClass:"btn btn-success",attrs:{id:"learningoutcome-database"},on:{click:function(t){e.changeDatabase("learningoutcome")}}},[e._v(" Learning Outcomes ")]),n("button",{staticClass:"btn btn-success",attrs:{id:"learningitem-database"},on:{click:function(t){e.changeDatabase("learningitem")}}},[e._v(" Learning Items ")]),n("button",{staticClass:"btn btn-success",attrs:{id:"contentsection-database"},on:{click:function(t){e.changeDatabase("contentsection")}}},[e._v(" Content Sections ")]),n("button",{staticClass:"btn btn-success",attrs:{id:"domainconcept-database"},on:{click:function(t){e.changeDatabase("domainconcept")}}},[e._v(" Domain Concepts ")])]),n("br"),n("div",{staticClass:"text-center"},[null==e.errorTypes&&"errortype"==e.database||null==e.learningOutcomes&&"learningoutcome"==e.database||null==e.contentSections&&"contentsection"==e.database||null==e.domainConcepts&&"domainconcept"==e.database||null==e.learningItems&&"learningitem"==e.database?n("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[n("circle2")],1):e._e()]),null!=e.errorTypes&&"errortype"==e.database?n("div",{},[n("table",{staticClass:"table table-bordered"},[e._m(0),n("tbody",e._l(e.errorTypes,(function(t){return n("tr",{key:t._id},[n("td",[n("div",{staticClass:"pretty p-icon p-round p-smooth"},[n("input",{attrs:{type:"checkbox",id:t._id},on:{input:function(n){e.updateSelected(t._id)}}}),e._m(1,!0)])]),n("td",[e._v(e._s(t.name))]),n("td",[e._v(e._s(t.weight))]),n("td",[e._v(e._s(t.description))]),n("td",[e._v(e._s(e.learningOutcomeIDToName[t.learningOutcome]))]),n("td",[n("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[n("div",[n("button",{staticClass:"btn btn-sm btn-outline-secondary",on:{click:function(n){e.editError(t)}}},[e._v("Edit Errortype ")])])])])])})),0)])]):e._e(),null!=e.learningOutcomes&&"learningoutcome"==e.database?n("div",{},[n("table",{staticClass:"table table-bordered"},[e._m(2),n("tbody",e._l(e.learningOutcomes,(function(t){return n("tr",{key:t._id},[n("td",[n("div",{staticClass:"pretty p-icon p-round p-smooth"},[n("input",{attrs:{type:"checkbox",id:t._id},on:{input:function(n){e.updateSelected(t._id)}}}),e._m(3,!0)])]),n("td",[e._v(e._s(t.name))]),n("td",[e._v(e._s(t.BloomLevelCognitive))]),n("td",[e._v(e._s(t.BloomLevelKnowledge))]),n("td",[e._v(e._s(e.multipleLearningItemIDsToString(t.LearningItems)))]),n("td",[e._v(e._s(e.multipleContentSectionIDsToString(t.ContentSections)))]),n("td",[e._v(e._s(e.multipleDomainConceptIDsToString(t.DomainConcepts)))]),n("td",[n("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[n("div",[n("button",{staticClass:"btn btn-sm btn-outline-secondary",on:{click:function(n){e.editLearningOutcome(t)}}},[e._v("Edit Learning Outcome ")])])])])])})),0)])]):e._e(),null!=e.learningItems&&"learningitem"==e.database?n("div",{},[n("table",{staticClass:"table table-bordered"},[e._m(4),n("tbody",e._l(e.learningItems,(function(t){return n("tr",{key:t._id},[n("td",[n("div",{staticClass:"pretty p-icon p-round p-smooth"},[n("input",{attrs:{type:"checkbox",id:t._id},on:{input:function(n){e.updateSelected(t._id)}}}),e._m(5,!0)])]),n("td",[e._v(e._s(t.name))]),n("td",[n("a",{staticClass:"linkified",attrs:{href:e.getValidURL(t.url),target:"_blank"}},[e._v(e._s(t.url))])]),n("td",[e._v(e._s(t.difficulty))]),n("td",[e._v(e._s(e.multipleContentSectionIDsToString(t.ContentSections)))]),n("td",[e._v(e._s(e.multipleDomainConceptIDsToString(t.DomainConcepts)))]),n("td",[n("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[n("div",[n("button",{staticClass:"btn btn-sm btn-outline-secondary",on:{click:function(n){e.editLearningItem(t)}}},[e._v("Edit Learning Item ")])])])])])})),0)])]):e._e(),null!=e.contentSections&&"contentsection"==e.database?n("div",{},[n("table",{staticClass:"table table-bordered"},[e._m(6),n("tbody",e._l(e.contentSections,(function(t){return n("tr",{key:t._id},[n("td",[n("div",{staticClass:"pretty p-icon p-round p-smooth"},[n("input",{attrs:{type:"checkbox",id:t._id},on:{input:function(n){e.updateSelected(t._id)}}}),e._m(7,!0)])]),n("td",[e._v(e._s(t.name))]),n("td",[e._v(e._s(e.multipleDomainConceptIDsToString(t.DomainConcepts)))]),n("td",[n("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[n("div",[n("button",{staticClass:"btn btn-sm btn-outline-secondary",on:{click:function(n){e.editContentSection(t)}}},[e._v("Edit Content Section ")])])])])])})),0)])]):e._e(),null!=e.domainConcepts&&"domainconcept"==e.database?n("div",{},[n("table",{staticClass:"table table-bordered"},[e._m(8),n("tbody",e._l(e.domainConcepts,(function(t){return n("tr",{key:t._id},[n("td",[n("div",{staticClass:"pretty p-icon p-round p-smooth"},[n("input",{attrs:{type:"checkbox",id:t._id},on:{input:function(n){e.updateSelected(t._id)}}}),e._m(9,!0)])]),n("td",[e._v(e._s(t.name))]),n("td",[n("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[n("div",[n("button",{staticClass:"btn btn-sm btn-outline-secondary",on:{click:function(n){e.editDomainConcept(t)}}},[e._v("Edit Domain Concept ")])])])])])})),0)])]):e._e()])],1)},m=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",{staticClass:"thead-dark"},[n("tr",[n("th",{attrs:{scope:"col"}},[e._v("Select ")]),n("th",{attrs:{scope:"col"}},[e._v("Type of error")]),n("th",{attrs:{scope:"col"}},[e._v("Weight")]),n("th",{attrs:{scope:"col"}},[e._v("Description")]),n("th",{attrs:{scope:"col"}},[e._v("Learning outcome")]),n("th",{attrs:{scope:"col"}},[e._v("Actions")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"state p-success"},[n("i",{staticClass:"icon mdi mdi-check"}),n("label")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",{staticClass:"thead-dark"},[n("tr",[n("th",{attrs:{scope:"col"}},[e._v("Select ")]),n("th",{attrs:{scope:"col"}},[e._v("Learning outcome")]),n("th",{attrs:{scope:"col"}},[e._v("BloomLevel Cognitive")]),n("th",{attrs:{scope:"col"}},[e._v("BloomLevel Knowledge")]),n("th",{attrs:{scope:"col"}},[e._v("Learning Items")]),n("th",{attrs:{scope:"col"}},[e._v("Content Sections")]),n("th",{attrs:{scope:"col"}},[e._v("Domain Concepts")]),n("th",{attrs:{scope:"col"}},[e._v("Actions")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"state p-success"},[n("i",{staticClass:"icon mdi mdi-check"}),n("label")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",{staticClass:"thead-dark"},[n("tr",[n("th",{attrs:{scope:"col"}},[e._v("Select ")]),n("th",{attrs:{scope:"col"}},[e._v("Learning item")]),n("th",{attrs:{scope:"col"}},[e._v("URL")]),n("th",{attrs:{scope:"col"}},[e._v("Difficulty")]),n("th",{attrs:{scope:"col"}},[e._v("Content Sections")]),n("th",{attrs:{scope:"col"}},[e._v("Domain Concepts")]),n("th",{attrs:{scope:"col"}},[e._v("Actions")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"state p-success"},[n("i",{staticClass:"icon mdi mdi-check"}),n("label")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",{staticClass:"thead-dark"},[n("tr",[n("th",{attrs:{scope:"col"}},[e._v("Select ")]),n("th",{attrs:{scope:"col"}},[e._v("Content section")]),n("th",{attrs:{scope:"col"}},[e._v("Domain Concepts")]),n("th",{attrs:{scope:"col"}},[e._v("Actions")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"state p-success"},[n("i",{staticClass:"icon mdi mdi-check"}),n("label")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",{staticClass:"thead-dark"},[n("tr",[n("th",{attrs:{scope:"col"}},[e._v("Select ")]),n("th",{attrs:{scope:"col"}},[e._v("Domain Concept")]),n("th",{attrs:{scope:"col"}},[e._v("Actions")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"state p-success"},[n("i",{staticClass:"icon mdi mdi-check"}),n("label")])}],h=n("be94"),p=(n("28a5"),n("34ef"),n("ac4d"),n("8a81"),n("c5f6"),n("7f7f"),n("2909")),g=(n("1c4c"),n("ac6a"),n("5df3"),n("4f7f"),n("1157")),f=n.n(g),v={baseURL:"https://ku-leuven-grader-server.herokuapp.com"},_=n("bc3a"),C=n.n(_),b=n("b193"),y=n.n(b),S=n("1146"),w=n.n(S),I=n("d58b");y.a.utils.isBrowserify=!1,y.a.utils.global.XLSX=w.a;var D={data:function(){return{modus:"create",errorTypes:null,learningOutcomes:null,learningItems:null,contentSections:null,domainConcepts:null,errorName:"",errorWeight:"",errorDescription:"",errorID:null,selectedLearningOutcome:null,learningName:"",learningBloomLevelCognitive:"",learningBloomLevelKnowledge:"",learningID:null,selectedDomainConcepts:null,selectedLearningItems:null,learningItemName:"",learningItemURL:"",learningItemIsExercise:!1,learningItemDifficulty:"",learningItemID:null,selectedContentSections:null,contentSectionName:"",contentSectionID:null,domainConceptName:"",domainConceptID:null,dropdownErrorTypes:{},sortedErrorTypeIDs:[],errorTypeIDToName:{},dropdownLearningOutcomes:{},sortedOutcomeIDs:[],learningOutcomeIDToName:{},dropdownDomainConcepts:{},sortedDomainConceptIDs:[],domainConceptIDToName:{},dropdownContentSections:{},sortedContentSectionIDs:[],contentSectionIDToName:{},dropdownLearningItems:{},sortedLearningItemIDs:[],learningItemIDToName:{},selected:new Set,faultMessage:"empty",database:"errortype"}},components:{Circle2:I["a"]},mounted:function(){f()("#input-excel").hide();var e=this;f()("#input-excel").change((function(t){e.importDatabase(t)})),this.changeDatabase("errortype")},created:function(){this.fetchDomainConcepts(),this.fetchContentSections(),this.fetchLearningItems(),this.fetchLearningOutcomes(),this.fetchErrorTypes()},methods:{getValidURL:function(e){var t="http://",n="https://";return e.substr(0,t.length)!==t&&e.substr(0,t.length)!==n&&(e=t+e),e},multipleDomainConceptIDsToString:function(e){for(var t="",n=0;n<e.length;n++)t+=this.domainConceptIDToName[e[n]]+", ";return t.slice(0,t.length-2)},multipleContentSectionIDsToString:function(e){for(var t="",n=0;n<e.length;n++)t+=this.contentSectionIDToName[e[n]]+", ";return t.slice(0,t.length-2)},multipleLearningItemIDsToString:function(e){for(var t="",n=0;n<e.length;n++)t+=this.learningItemIDToName[e[n]]+", ";return t.slice(0,t.length-2)},importWarning:function(){this.$modal.show("warning-popup")},changeDatabase:function(e){this.errorTypes=null,this.learningOutcomes=null,this.domainConcepts=null,this.contentSections=null,this.learningItems=null,this.fetchDomainConcepts(),this.fetchContentSections(),this.fetchLearningItems(),this.fetchLearningOutcomes(),this.fetchErrorTypes(),this.database=e,this.selected=new Set,f()("#errortype-database").get(0).setAttribute("style","background-color: #2c3e50;"),f()("#learningoutcome-database").get(0).setAttribute("style","background-color: #2c3e50;"),f()("#learningitem-database").get(0).setAttribute("style","background-color: #2c3e50;"),f()("#domainconcept-database").get(0).setAttribute("style","background-color: #2c3e50;"),f()("#contentsection-database").get(0).setAttribute("style","background-color: #2c3e50;"),f()("#"+e+"-database").get(0).setAttribute("style","background-color: green;")},deleteSelection:function(){var e=Array.from(this.selected);if("domainconcept"==this.database){for(var t=!0,n=0;n<this.contentSections.length;n++){for(var i=Object(p["a"])(this.contentSections[n].DomainConcepts),o=i.length,r=0;r<e.length;r++){var s=i.indexOf(e[r]);s>-1&&i.splice(s,1)}0==i.length&&0!=o&&(t=!1)}if(t)for(this.deleteDomainConceptsInContentSections(e),this.deleteDomainConceptsInLearningItems(e),this.deleteDomainConceptsInLearningOutcomes(e),r=0;r<e.length;r++)this.deleteID(e[r],"domainconcept");else this.faultMessage="The delete command is not executed.\nThe selection contains a combination of domain concepts that will cause a Content Section having zero domain concepts.",this.$modal.show("fault-popup")}else if("contentsection"==this.database)for(this.deleteContentSectionsInLearningItems(e),this.deleteContentSectionsInLearningOutcomes(e),r=0;r<e.length;r++)this.deleteID(e[r],"contentsection");else if("learningitem"==this.database)for(this.deleteLearningItemsInLearningOutcomes(e),r=0;r<e.length;r++)this.deleteID(e[r],"learningitem");else if("learningoutcome"==this.database)for(this.deleteLearningOutcomesInErrorTypes(e),r=0;r<e.length;r++)this.deleteID(e[r],"learningoutcome");else if("errortype"==this.database)for(r=0;r<e.length;r++)this.deleteID(e[r],"errortype")},updateSelected:function(e){f()("#"+e).get(0).checked?this.selected.add(e):this.selected.delete(e)},newError:function(){this.modus="create",this.$modal.show("create-errortype")},newLearningOutcome:function(){this.modus="create",this.$modal.show("create-learningoutcome")},newLearningItem:function(){this.modus="create",this.$modal.show("create-learningitem")},newContentSection:function(){this.modus="create",this.$modal.show("create-contentsection")},newDomainConcept:function(){this.modus="create",this.$modal.show("create-domainconcept")},editError:function(e){this.modus="edit",this.errorName=e.name,this.errorWeight=e.weight,this.errorDescription=e.description,this.selectedLearningOutcome=this.learningOutcomeIDToName[e.learningOutcome],this.errorID=e._id,this.$modal.show("create-errortype")},editLearningOutcome:function(e){this.modus="edit",this.learningName=e.name,this.learningBloomLevelCognitive=e.BloomLevelCognitive,this.learningBloomLevelKnowledge=e.BloomLevelKnowledge,this.learningID=e._id,this.selectedDomainConcepts=[];for(var t=0;t<e.DomainConcepts.length;t++)this.selectedDomainConcepts.push(this.dropdownDomainConcepts[e.DomainConcepts[t]]);for(this.selectedContentSections=[],t=0;t<e.ContentSections.length;t++)this.selectedContentSections.push(this.dropdownContentSections[e.ContentSections[t]]);for(this.selectedLearningItems=[],t=0;t<e.LearningItems.length;t++)this.selectedLearningItems.push(this.dropdownLearningItems[e.LearningItems[t]]);this.$modal.show("create-learningoutcome")},editLearningItem:function(e){this.modus="edit",this.learningItemName=e.name,this.learningItemURL=e.url,this.learningItemIsExercise=e.isExerciseItem,this.learningItemDifficulty=e.difficulty,this.selectedContentSections=[];for(var t=0;t<e.ContentSections.length;t++)this.selectedContentSections.push(this.dropdownContentSections[e.ContentSections[t]]);for(this.selectedDomainConcepts=[],t=0;t<e.DomainConcepts.length;t++)this.selectedDomainConcepts.push(this.dropdownDomainConcepts[e.DomainConcepts[t]]);this.learningItemID=e._id,this.$modal.show("create-learningitem")},editContentSection:function(e){this.modus="edit",this.contentSectionName=e.name,this.contentSectionID=e._id,this.selectedDomainConcepts=[];for(var t=0;t<e.DomainConcepts.length;t++)this.selectedDomainConcepts.push(this.dropdownDomainConcepts[e.DomainConcepts[t]]);this.$modal.show("create-contentsection")},editDomainConcept:function(e){this.modus="edit",this.domainConceptName=e.name,this.domainConceptID=e._id,this.$modal.show("create-domainconcept")},hideImportWarning:function(){this.$modal.hide("warning-popup")},hideErrorTypePopup:function(){this.modus="create",this.errorName="",this.errorWeight="",this.errorDescription="",this.selectedLearningOutcome=null,this.errorID=null,this.$modal.hide("create-errortype")},hideLearningOutcomePopup:function(){this.modus="create",this.learningName="",this.learningBloomLevelCognitive="",this.learningBloomLevelKnowledge="",this.learningID=null,this.selectedDomainConcepts=null,this.selectedLearningItems=null,this.selectedContentSections=null,this.$modal.hide("create-learningoutcome")},hideLearningItemPopup:function(){this.modus="create",this.learningItemName="",this.learningItemURL="",this.learningItemIsExercise=!1,this.learningItemDifficulty="",this.selectedContentSections=null,this.selectedDomainConcepts=null,this.learningItemID=null,this.$modal.hide("create-learningitem")},hideContentSectionPopup:function(){this.modus="create",this.contentSectionName="",this.contentSectionID=null,this.selectedDomainConcepts=null,this.$modal.hide("create-contentsection")},hideDomainConceptPopup:function(){this.modus="create",this.domainConceptName="",this.domainConceptID=null,this.$modal.hide("create-domainconcept")},areAttributesValid:function(e){for(var t=0;t<e.length;t++)if(!(String(f()("#"+e[t]).get(0).style.border).indexOf("green")>=0))return!1;return!0},pushErrorType:function(){if(this.areAttributesValid(["description","name","weight","dropdown"])){var e="";null!=this.selectedLearningOutcome&&(e=this.sortedOutcomeIDs[Number(this.selectedLearningOutcome.slice(0,this.selectedLearningOutcome.indexOf(":")))-1]);var t={name:this.errorName,weight:this.errorWeight,description:this.errorDescription,learningOutcome:e};this.__submitErrorTypeToServer(t),this.hideErrorTypePopup()}},pushLearningOutcome:function(){if(this.areAttributesValid(["learningName","learningBloomLevelCognitive","learningBloomLevelKnowledge"])){var e=[];if(null!=this.selectedDomainConcepts)for(var t=0;t<this.selectedDomainConcepts.length;t++)e.push(this.sortedDomainConceptIDs[Number(this.selectedDomainConcepts[t].slice(0,this.selectedDomainConcepts[t].indexOf(":")))-1]);var n=[];if(null!=this.selectedContentSections)for(t=0;t<this.selectedContentSections.length;t++)n.push(this.sortedContentSectionIDs[Number(this.selectedContentSections[t].slice(0,this.selectedContentSections[t].indexOf(":")))-1]);var i=[];if(null!=this.selectedLearningItems)for(t=0;t<this.selectedLearningItems.length;t++)i.push(this.sortedLearningItemIDs[Number(this.selectedLearningItems[t].slice(0,this.selectedLearningItems[t].indexOf(":")))-1]);var o={name:this.learningName,BloomLevelCognitive:this.learningBloomLevelCognitive,BloomLevelKnowledge:this.learningBloomLevelKnowledge,DomainConcepts:e,ContentSections:n,LearningItems:i};this.__submitLearningOutcomeToServer(o),this.hideLearningOutcomePopup()}},pushLearningItem:function(){if(this.learningItemIsExercise&&this.areAttributesValid(["learningItemName","learningItemURL","learningItemDifficulty"])||!this.learningItemIsExercise&&this.areAttributesValid(["learningItemName","learningItemURL"])){var e=[];if(null!=this.selectedDomainConcepts)for(var t=0;t<this.selectedDomainConcepts.length;t++)e.push(this.sortedDomainConceptIDs[Number(this.selectedDomainConcepts[t].slice(0,this.selectedDomainConcepts[t].indexOf(":")))-1]);var n=[];if(null!=this.selectedContentSections)for(t=0;t<this.selectedContentSections.length;t++)n.push(this.sortedContentSectionIDs[Number(this.selectedContentSections[t].slice(0,this.selectedContentSections[t].indexOf(":")))-1]);this.learningItemIsExercise||(this.learningItemDifficulty="");var i={name:this.learningItemName,url:this.learningItemURL,ContentSections:n,DomainConcepts:e,isExerciseItem:this.learningItemIsExercise,difficulty:this.learningItemDifficulty};this.__submitLearningItemToServer(i),this.hideLearningItemPopup()}},pushContentSection:function(){if(this.areAttributesValid(["contentSectionName","contentsection-dropdown"])){var e=[];if(null!=this.selectedDomainConcepts)for(var t=0;t<this.selectedDomainConcepts.length;t++)e.push(this.sortedDomainConceptIDs[Number(this.selectedDomainConcepts[t].slice(0,this.selectedDomainConcepts[t].indexOf(":")))-1]);var n={name:this.contentSectionName,DomainConcepts:e};this.__submitContentSectionToServer(n),this.hideContentSectionPopup()}},pushDomainConcept:function(){if(this.areAttributesValid(["domainConceptName"])){var e={name:this.domainConceptName};this.__submitDomainConceptToServer(e),this.hideDomainConceptPopup()}},__submitErrorTypeToServer:function(e){var t=this;"create"==this.modus?C.a.post("".concat(v.baseURL,"/errortype/create"),e).then((function(){t.fetchErrorTypes()})):"edit"==this.modus&&C.a.put("".concat(v.baseURL,"/errortype/update?errorTypeID=").concat(this.errorID),e).then((function(){t.fetchErrorTypes()}))},__submitLearningOutcomeToServer:function(e){var t=this;"create"==this.modus?C.a.post("".concat(v.baseURL,"/learningoutcome/create"),e).then((function(){t.fetchLearningOutcomes()})):"edit"==this.modus&&C.a.put("".concat(v.baseURL,"/learningoutcome/update?learningOutcomeID=").concat(this.learningID),e).then((function(){t.fetchLearningOutcomes()}))},__submitLearningItemToServer:function(e){var t=this;"create"==this.modus?C.a.post("".concat(v.baseURL,"/learningitem/create"),e).then((function(){t.fetchLearningItems()})):"edit"==this.modus&&C.a.put("".concat(v.baseURL,"/learningitem/update?learningItemID=").concat(this.learningItemID),e).then((function(){t.fetchLearningItems()}))},__submitContentSectionToServer:function(e){var t=this;"create"==this.modus?C.a.post("".concat(v.baseURL,"/contentsection/create"),e).then((function(){t.fetchContentSections()})):"edit"==this.modus&&C.a.put("".concat(v.baseURL,"/contentsection/update?contentSectionID=").concat(this.contentSectionID),e).then((function(){t.fetchContentSections()}))},__submitDomainConceptToServer:function(e){var t=this;"create"==this.modus?C.a.post("".concat(v.baseURL,"/domainconcept/create"),e).then((function(){t.fetchDomainConcepts()})):"edit"==this.modus&&C.a.put("".concat(v.baseURL,"/domainconcept/update?domainConceptID=").concat(this.domainConceptID),e).then((function(){t.fetchDomainConcepts()}))},atLeastOneSymbol:function(e){f()("#"+e).get(0).value.length<1?f()("#"+e).get(0).setAttribute("style","border: 2px solid red;"):f()("#"+e).get(0).setAttribute("style","border: 2px solid green;")},changeInErrorType:function(){this.atLeastOneSymbol("name"),this.atLeastOneSymbol("description");var e=new Set("01234567890"),t=new Set(f()("#weight").get(0).value),n=!0,i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;e.has(l)||(n=!1)}}catch(c){o=!0,r=c}finally{try{i||null==a.return||a.return()}finally{if(o)throw r}}f()("#weight").get(0).value.length<1||!n?f()("#weight").get(0).setAttribute("style","border: 2px solid red;"):f()("#weight").get(0).setAttribute("style","border: 2px solid green;")},changeInLearningOutcome:function(){this.atLeastOneSymbol("learningName"),this.atLeastOneSymbol("learningBloomLevelCognitive"),this.atLeastOneSymbol("learningBloomLevelKnowledge")},changeInLearningItem:function(){this.atLeastOneSymbol("learningItemName"),this.atLeastOneSymbol("learningItemURL"),this.learningItemIsExercise&&this.atLeastOneSymbol("learningItemDifficulty")},changeInContentSection:function(){this.atLeastOneSymbol("contentSectionName"),null==this.selectedDomainConcepts||0==this.selectedDomainConcepts.length?f()("#contentsection-dropdown").get(0).setAttribute("style","border: 2px solid red;"):f()("#contentsection-dropdown").get(0).setAttribute("style","border: 2px solid green;")},changeInDomainConcept:function(){this.atLeastOneSymbol("domainConceptName")},fetchErrorTypes:function(){var e=this;C.a.get("".concat(v.baseURL,"/errortype/errortypes")).then((function(t){return e.updateNewErrorTypes(e,t.data)}))},fetchLearningOutcomes:function(){var e=this;C.a.get("".concat(v.baseURL,"/learningoutcome/learningoutcomes")).then((function(t){return e.updateNewLearningOutcomes(e,t.data)}))},fetchLearningItems:function(){var e=this;C.a.get("".concat(v.baseURL,"/learningitem/learningitems")).then((function(t){return e.updateNewLearningItems(e,t.data)}))},fetchContentSections:function(){var e=this;C.a.get("".concat(v.baseURL,"/contentsection/contentsections")).then((function(t){return e.updateNewContentSections(e,t.data)}))},fetchDomainConcepts:function(){var e=this;C.a.get("".concat(v.baseURL,"/domainconcept/domainconcepts")).then((function(t){return e.updateNewDomainConcepts(e,t.data)}))},updateNewErrorTypes:function(e,t){var n;for(e.dropdownErrorTypes={},e.sortedErrorTypeIDs=[],e.errorTypeIDToName={},e.errorTypes=t,n=0;n<e.errorTypes.length;n++)e.dropdownErrorTypes[e.errorTypes[n]._id]=String(n+1)+": "+String(e.errorTypes[n].name),e.errorTypeIDToName[e.errorTypes[n]._id]=e.errorTypes[n].name,e.sortedErrorTypeIDs.push(e.errorTypes[n]._id)},updateNewLearningOutcomes:function(e,t){var n;for(e.dropdownLearningOutcomes={},e.sortedOutcomeIDs=[],e.learningOutcomeIDToName={},e.learningOutcomes=t,n=0;n<e.learningOutcomes.length;n++)e.dropdownLearningOutcomes[e.learningOutcomes[n]._id]=String(n+1)+": "+String(e.learningOutcomes[n].name),e.learningOutcomeIDToName[e.learningOutcomes[n]._id]=e.learningOutcomes[n].name,e.sortedOutcomeIDs.push(e.learningOutcomes[n]._id)},updateNewLearningItems:function(e,t){var n;for(e.dropdownLearningItems={},e.sortedLearningItemIDs=[],e.learningItemIDToName={},e.learningItems=t,n=0;n<e.learningItems.length;n++)e.dropdownLearningItems[e.learningItems[n]._id]=String(n+1)+": "+String(e.learningItems[n].name),e.learningItemIDToName[e.learningItems[n]._id]=e.learningItems[n].name,e.sortedLearningItemIDs.push(e.learningItems[n]._id)},updateNewContentSections:function(e,t){var n;for(e.dropdownContentSections={},e.sortedContentSectionIDs=[],e.contentSectionIDToName={},e.contentSections=t,n=0;n<e.contentSections.length;n++)e.dropdownContentSections[e.contentSections[n]._id]=String(n+1)+": "+String(e.contentSections[n].name),e.contentSectionIDToName[e.contentSections[n]._id]=e.contentSections[n].name,e.sortedContentSectionIDs.push(e.contentSections[n]._id)},updateNewDomainConcepts:function(e,t){var n;for(e.dropdownDomainConcepts={},e.sortedDomainConceptIDs=[],e.domainConceptIDToName={},e.domainConcepts=t,n=0;n<e.domainConcepts.length;n++)e.dropdownDomainConcepts[e.domainConcepts[n]._id]=String(n+1)+": "+String(e.domainConcepts[n].name),e.domainConceptIDToName[e.domainConcepts[n]._id]=e.domainConcepts[n].name,e.sortedDomainConceptIDs.push(e.domainConcepts[n]._id)},deleteID:function(e,t){var n=this;"errortype"==t?C.a.delete("".concat(v.baseURL,"/errortype/delete?errorTypeID=").concat(e)).then((function(){n.fetchErrorTypes()})):"learningoutcome"==t?C.a.delete("".concat(v.baseURL,"/learningoutcome/delete?learningOutcomeID=").concat(e)).then((function(){n.fetchLearningOutcomes()})):"learningitem"==t?C.a.delete("".concat(v.baseURL,"/learningitem/delete?learningItemID=").concat(e)).then((function(){n.fetchLearningItems()})):"contentsection"==t?C.a.delete("".concat(v.baseURL,"/contentsection/delete?contentSectionID=").concat(e)).then((function(){n.fetchContentSections()})):"domainconcept"==t&&C.a.delete("".concat(v.baseURL,"/domainconcept/delete?domainConceptID=").concat(e)).then((function(){n.fetchDomainConcepts()}))},intersection:function(e,t){var n=new Set,i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;e.has(l)&&n.add(l)}}catch(c){o=!0,r=c}finally{try{i||null==a.return||a.return()}finally{if(o)throw r}}return n},difference:function(e,t){var n=new Set(e),i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;n.delete(l)}}catch(c){o=!0,r=c}finally{try{i||null==a.return||a.return()}finally{if(o)throw r}}return n},deleteLearningOutcomeInErrorTypes:function(e){for(var t=null,n=0;n<e.length;n++){t=e[n];for(var i=0;i<this.errorTypes.length;i++)if(this.errorTypes[i].learningOutcome==t){var o={learningOutcome:null},r=this;C.a.put("".concat(v.baseURL,"/errortype/update?errorTypeID=").concat(this.errorTypes[i]._id),o).then((function(){r.fetchErrorTypes()}))}}},deleteDomainConceptsInContentSections:function(e){for(var t,n=0;n<this.contentSections.length;n++){var i=new Set(this.contentSections[n].DomainConcepts),o=this.intersection(new Set(e),i);if(t=Array.from(o).length>0,t){var r=Array.from(this.difference(i,o)),s={DomainConcepts:r},a=this;C.a.put("".concat(v.baseURL,"/contentsection/update?contentSectionID=").concat(this.contentSections[n]._id),s).then((function(){a.fetchContentSections()}))}}},deleteDomainConceptsInLearningItems:function(e){for(var t,n=0;n<this.learningItems.length;n++){var i=new Set(this.learningItems[n].DomainConcepts),o=this.intersection(new Set(e),i);if(t=Array.from(o).length>0,t){var r=Array.from(this.difference(i,o)),s={DomainConcepts:r},a=this;C.a.put("".concat(v.baseURL,"/learningitem/update?learningItemID=").concat(this.learningItems[n]._id),s).then((function(){a.fetchLearningItems()}))}}},deleteDomainConceptsInLearningOutcomes:function(e){for(var t,n=0;n<this.learningOutcomes.length;n++){var i=new Set(this.learningOutcomes[n].DomainConcepts),o=this.intersection(new Set(e),i);if(t=Array.from(o).length>0,t){var r=Array.from(this.difference(i,o)),s={DomainConcepts:r},a=this;C.a.put("".concat(v.baseURL,"/learningoutcome/update?learningOutcomeID=").concat(this.learningOutcomes[n]._id),s).then((function(){a.fetchLearningOutcomes()}))}}},deleteContentSectionsInLearningItems:function(e){for(var t=new Set(e),n=0;n<this.learningItems.length;n++){var i=new Set(this.learningItems[n].ContentSections),o=new Set(Object(p["a"])(i).filter((function(e){return!t.has(e)}))),r={ContentSections:Array.from(o)},s=this;C.a.put("".concat(v.baseURL,"/learningitem/update?learningItemID=").concat(this.learningItems[n]._id),r).then((function(){s.fetchLearningItems()}))}},deleteContentSectionsInLearningOutcomes:function(e){for(var t=new Set(e),n=0;n<this.learningOutcomes.length;n++){var i=new Set(this.learningOutcomes[n].ContentSections),o=new Set(Object(p["a"])(i).filter((function(e){return!t.has(e)}))),r={ContentSections:Array.from(o)},s=this;C.a.put("".concat(v.baseURL,"/learningoutcome/update?learningOutcomeID=").concat(this.learningOutcomes[n]._id),r).then((function(){s.fetchLearningOutcomes()}))}},deleteLearningItemsInLearningOutcomes:function(e){for(var t=new Set(e),n=0;n<this.learningOutcomes.length;n++){var i=new Set(this.learningOutcomes[n].LearningItems),o=new Set(Object(p["a"])(i).filter((function(e){return!t.has(e)}))),r={LearningItems:Array.from(o)},s=this;C.a.put("".concat(v.baseURL,"/learningoutcome/update?learningOutcomeID=").concat(this.learningOutcomes[n]._id),r).then((function(){s.fetchLearningOutcomes()}))}},deleteLearningOutcomesInErrorTypes:function(e){for(var t=0;t<this.errorTypes.length;t++)for(var n=this.errorTypes[t],i=0;i<e.length;i++)if(n.learningOutcome==e[i]){var o={learningOutcome:""},r=this;C.a.put("".concat(v.baseURL,"/errortype/update?errorTypeID=").concat(n._id),o).then((function(){r.fetchErrorTypes()}))}},exportDatabase:function(){for(var e=[],t=[],n=[],i=[],o=[],r=[{sheetid:"ERROR TYPES",header:!0},{sheetid:"LEARNING OUTCOMES",header:!0},{sheetid:"LEARNING ITEMS",header:!0},{sheetid:"CONTENT SECTIONS",header:!0},{sheetid:"DOMAIN CONCEPTS",header:!0}],s=0;s<this.domainConcepts.length;s++)e.push({ID:this.domainConcepts[s]._id,"DOMAIN CONCEPT":this.domainConcepts[s].name});for(s=0;s<this.contentSections.length;s++)t.push({ID:this.contentSections[s]._id,"CONTENT SECTION":this.contentSections[s].name,"DOMAIN CONCEPT IDS":this.contentSections[s].DomainConcepts});for(s=0;s<this.learningItems.length;s++)n.push({ID:this.learningItems[s]._id,"LEARNING ITEM":this.learningItems[s].name,URL:this.learningItems[s].url,"EXERCISE ITEM":String(this.learningItems[s].isExerciseItem),DIFFICULTY:this.learningItems[s].difficulty,"CONTENT SECTION IDS":this.learningItems[s].ContentSections,"DOMAIN CONCEPT IDS":this.learningItems[s].DomainConcepts});for(s=0;s<this.learningOutcomes.length;s++)i.push({ID:this.learningOutcomes[s]._id,"LEARNING OUTCOME":this.learningOutcomes[s].name,"BLOOMLEVEL COGNITIVE":this.learningOutcomes[s].BloomLevelCognitive,"BLOOMLEVEL KNOWLEDGE":this.learningOutcomes[s].BloomLevelKnowledge,"LEARNING ITEM IDS":this.learningOutcomes[s].LearningItems,"CONTENT SECTION IDS":this.learningOutcomes[s].ContentSections,"DOMAIN CONCEPT IDS":this.learningOutcomes[s].DomainConcepts});for(s=0;s<this.errorTypes.length;s++)o.push({ID:this.errorTypes[s]._id,"ERROR TYPE":this.errorTypes[s].name,WEIGHT:this.errorTypes[s].weight,DESCRIPTION:this.errorTypes[s].description,"LEARNING OUTCOME ID":this.errorTypes[s].learningOutcome});o.push({"":""}),i.push({"":""}),n.push({"":""}),t.push({"":""}),e.push({"":""}),y()('SELECT INTO XLSX("database.xlsx",?) FROM ?',[r,[o,i,n,t,e]])},triggerUpload:function(){this.$modal.hide("warning-popup"),f()("#input-excel").trigger("click")},importDatabase:function(e){var t=new FileReader,n=this;t.readAsArrayBuffer(e.target.files[0]),t.onload=function(){var e=new Uint8Array(t.result),i=w.a.read(e,{type:"array"});if(n.isImportReady(i)){var o;for(o=0;o<n.errorTypes.length;o++)n.deleteID(n.errorTypes[o]._id,"errortype");for(o=0;o<n.learningOutcomes.length;o++)n.deleteID(n.learningOutcomes[o]._id,"learningoutcome");for(o=0;o<n.learningItems.length;o++)n.deleteID(n.learningItems[o]._id,"learningitem");for(o=0;o<n.contentSections.length;o++)n.deleteID(n.contentSections[o]._id,"contentsection");for(o=0;o<n.domainConcepts.length;o++)n.deleteID(n.domainConcepts[o]._id,"domainconcept");var r=n.isImportReady(i),s=r[1],a=r[2],l=r[3],c=r[4],d=r[5];n.importDomainConcepts(Object(p["a"])(d),[d,c,l,a,s])}}},isImportReady:function(e){if(e.SheetNames.indexOf("ERROR TYPES")<0)return this.faultMessage="No sheet named 'ERROR TYPES' found!",this.$modal.show("fault-popup"),!1;if(e.SheetNames.indexOf("LEARNING OUTCOMES")<0)return this.faultMessage="No sheet named 'LEARNING OUTCOMES' found!",this.$modal.show("fault-popup"),!1;if(e.SheetNames.indexOf("LEARNING ITEMS")<0)return this.faultMessage="No sheet named 'LEARNING ITEMS' found!",this.$modal.show("fault-popup"),!1;if(e.SheetNames.indexOf("CONTENT SECTIONS")<0)return this.faultMessage="No sheet named 'CONTENT SECTIONS' found!",this.$modal.show("fault-popup"),!1;if(e.SheetNames.indexOf("DOMAIN CONCEPTS")<0)return this.faultMessage="No sheet named 'DOMAIN CONCEPTS' found!",this.$modal.show("fault-popup"),!1;var t=[],n=[],i=[],o=[],r=[],s=e.Sheets["DOMAIN CONCEPTS"],a=1;while(!this.isUndefinedOrEmpty(s[w.a.utils.encode_cell({c:0,r:a})])){if(this.isUndefinedOrEmpty(s[w.a.utils.encode_cell({c:1,r:a})]))return this.faultMessage="There is no NAME in sheet 'DOMAIN CONCEPTS' in cell "+w.a.utils.encode_cell({c:1,r:a})+"!",this.$modal.show("fault-popup"),!1;var l={_id:s[w.a.utils.encode_cell({c:0,r:a})].v,name:s[w.a.utils.encode_cell({c:1,r:a})].v};t.push(l),a+=1}s=e.Sheets["CONTENT SECTIONS"],a=1;while(!this.isUndefinedOrEmpty(s[w.a.utils.encode_cell({c:0,r:a})])){if(this.isUndefinedOrEmpty(s[w.a.utils.encode_cell({c:1,r:a})]))return this.faultMessage="There is no NAME in sheet 'CONTENT SECTIONS' in cell "+w.a.utils.encode_cell({c:1,r:a})+"!",this.$modal.show("fault-popup"),!1;if(this.isUndefinedOrEmpty(s[w.a.utils.encode_cell({c:2,r:a})]))return this.faultMessage="There has to be at least one DOMAIN CONCEPT ID in sheet 'CONTENT SECTIONS' in cell "+w.a.utils.encode_cell({c:2,r:a})+"!",this.$modal.show("fault-popup"),!1;var c={_id:s[w.a.utils.encode_cell({c:0,r:a})].v,name:s[w.a.utils.encode_cell({c:1,r:a})].v,DomainConcepts:s[w.a.utils.encode_cell({c:2,r:a})].v};n.push(c),a+=1}s=e.Sheets["LEARNING ITEMS"],a=1;while(!this.isUndefinedOrEmpty(s[w.a.utils.encode_cell({c:0,r:a})])){if(this.isUndefinedOrEmpty(s[w.a.utils.encode_cell({c:1,r:a})]))return this.faultMessage="There is no NAME in sheet 'LEARNING ITEMS' in cell "+w.a.utils.encode_cell({c:1,r:a})+"!",this.$modal.show("fault-popup"),!1;if(this.isUndefinedOrEmpty(s[w.a.utils.encode_cell({c:2,r:a})]))return this.faultMessage="There is no URL in sheet 'LEARNING ITEMS' in cell "+w.a.utils.encode_cell({c:2,r:a})+"!",this.$modal.show("fault-popup"),!1;if(this.isUndefinedOrEmpty(s[w.a.utils.encode_cell({c:3,r:a})])||["true","false"].indexOf(s[w.a.utils.encode_cell({c:3,r:a})].v)<0)return this.faultMessage="The value of EXERCISE ITEM in sheet 'LEARNING ITEMS' has to be 'true' or 'false' in cell "+w.a.utils.encode_cell({c:3,r:a})+"!",this.$modal.show("fault-popup"),!1;if("true"==s[w.a.utils.encode_cell({c:3,r:a})].v&&this.isUndefinedOrEmpty(s[w.a.utils.encode_cell({c:4,r:a})]))return this.faultMessage="In sheet 'LEARNING ITEMS', the DIFFICULTY cell can't be empty in cell "+w.a.utils.encode_cell({c:4,r:a})+" when EXERCISE ITEM is 'true'!",this.$modal.show("fault-popup"),!1;var d="";"true"==s[w.a.utils.encode_cell({c:3,r:a})].v&&(d=s[w.a.utils.encode_cell({c:4,r:a})].v);var u="",m="";this.isUndefinedOrEmpty(s[w.a.utils.encode_cell({c:5,r:a})])||(u=s[w.a.utils.encode_cell({c:5,r:a})].v),this.isUndefinedOrEmpty(s[w.a.utils.encode_cell({c:6,r:a})])||(m=s[w.a.utils.encode_cell({c:6,r:a})].v);var h={_id:s[w.a.utils.encode_cell({c:0,r:a})].v,name:s[w.a.utils.encode_cell({c:1,r:a})].v,url:s[w.a.utils.encode_cell({c:2,r:a})].v,isExerciseItem:s[w.a.utils.encode_cell({c:3,r:a})].v,difficulty:d,ContentSections:u,DomainConcepts:m};i.push(h),a+=1}s=e.Sheets["LEARNING OUTCOMES"],a=1;while(!this.isUndefinedOrEmpty(s[w.a.utils.encode_cell({c:0,r:a})])){if(this.isUndefinedOrEmpty(s[w.a.utils.encode_cell({c:1,r:a})]))return this.faultMessage="There is no NAME in sheet 'LEARNING OUTCOMES' in cell "+w.a.utils.encode_cell({c:1,r:a})+"!",this.$modal.show("fault-popup"),!1;if(this.isUndefinedOrEmpty(s[w.a.utils.encode_cell({c:2,r:a})]))return this.faultMessage="There is no BLOOMLEVEL COGNITIVE in sheet 'LEARNING OUTCOMES' in cell "+w.a.utils.encode_cell({c:2,r:a})+"!",this.$modal.show("fault-popup"),!1;if(this.isUndefinedOrEmpty(s[w.a.utils.encode_cell({c:3,r:a})]))return this.faultMessage="There is no BLOOMLEVEL KNOWLEDGE in sheet 'LEARNING OUTCOMES' in cell "+w.a.utils.encode_cell({c:3,r:a})+"!",this.$modal.show("fault-popup"),!1;var p="";u="",m="",this.isUndefinedOrEmpty(s[w.a.utils.encode_cell({c:4,r:a})])||(p=s[w.a.utils.encode_cell({c:4,r:a})].v),this.isUndefinedOrEmpty(s[w.a.utils.encode_cell({c:5,r:a})])||(u=s[w.a.utils.encode_cell({c:5,r:a})].v),this.isUndefinedOrEmpty(s[w.a.utils.encode_cell({c:6,r:a})])||(m=s[w.a.utils.encode_cell({c:6,r:a})].v);var g={_id:s[w.a.utils.encode_cell({c:0,r:a})].v,name:s[w.a.utils.encode_cell({c:1,r:a})].v,BloomLevelCognitive:s[w.a.utils.encode_cell({c:2,r:a})].v,BloomLevelKnowledge:s[w.a.utils.encode_cell({c:3,r:a})].v,LearningItems:p,ContentSections:u,DomainConcepts:m};o.push(g),a+=1}s=e.Sheets["ERROR TYPES"],a=1;while(!this.isUndefinedOrEmpty(s[w.a.utils.encode_cell({c:0,r:a})])){if(this.isUndefinedOrEmpty(s[w.a.utils.encode_cell({c:1,r:a})]))return this.faultMessage="There is no NAME in sheet 'ERROR TYPES' in cell "+w.a.utils.encode_cell({c:1,r:a})+"!",this.$modal.show("fault-popup"),!1;if(this.isUndefinedOrEmpty(s[w.a.utils.encode_cell({c:2,r:a})]))return this.faultMessage="There is no WEIGHT in sheet 'ERROR TYPES' in cell "+w.a.utils.encode_cell({c:2,r:a})+"!",this.$modal.show("fault-popup"),!1;for(var f=new Set("01234567890"),v=s[w.a.utils.encode_cell({c:2,r:a})].v,_=!0,C=0;C<v.length;C++)f.has(v[C])||(_=!1);if(!_)return this.faultMessage="The WEIGHT in sheet 'ERROR TYPES' in cell "+w.a.utils.encode_cell({c:2,r:a})+" can only contain numbers!",this.$modal.show("fault-popup"),!1;if(this.isUndefinedOrEmpty(s[w.a.utils.encode_cell({c:3,r:a})]))return this.faultMessage="There is no DESCRIPTION in sheet 'ERROR TYPES' in cell "+w.a.utils.encode_cell({c:3,r:a})+"!",this.$modal.show("fault-popup"),!1;var b="";if(this.isUndefinedOrEmpty(s[w.a.utils.encode_cell({c:4,r:a})])||(b=s[w.a.utils.encode_cell({c:4,r:a})].v),b.indexOf(",")>-1)return this.faultMessage="There can't be more than one LEARNING OUTCOME in sheet 'ERROR TYPES' in cell "+w.a.utils.encode_cell({c:4,r:a})+"! So no commas are allowed to separate multiple IDs.",this.$modal.show("fault-popup"),!1;var y={_id:s[w.a.utils.encode_cell({c:0,r:a})].v,name:s[w.a.utils.encode_cell({c:1,r:a})].v,weight:s[w.a.utils.encode_cell({c:2,r:a})].v,description:s[w.a.utils.encode_cell({c:3,r:a})].v,learningOutcome:b};r.push(y),a+=1}for(var S=[],I=[],D=[],E=[],N=[],T=[],x=0;x<t.length;x++)S.push(t[x]._id),I.push(t[x]._id);for(x=0;x<n.length;x++)S.push(n[x]._id),D.push(n[x]._id);for(x=0;x<i.length;x++)S.push(i[x]._id),E.push(i[x]._id);for(x=0;x<o.length;x++)S.push(o[x]._id),N.push(o[x]._id);for(x=0;x<r.length;x++)S.push(r[x]._id),T.push(r[x]._id);var O=new Set(S);if(S.length!=Array.from(O).length)return this.faultMessage="Not every ID is unique in the database!",this.$modal.show("fault-popup"),!1;for(x=0;x<n.length;x++)for(m=n[x].DomainConcepts.split(","),C=0;C<m.length;C++)if(I.indexOf(m[C])<0&&m[C].length>0)return this.faultMessage="A CONTENT SECTION exists with an invalid ID of a DOMAIN CONCEPT! The invalid ID = '"+m[C]+"'",this.$modal.show("fault-popup"),!1;for(x=0;x<i.length;x++){for(m=i[x].DomainConcepts.split(","),C=0;C<m.length;C++)if(I.indexOf(m[C])<0&&m[C].length>0)return this.faultMessage="A LEARNING ITEM exists with an invalid ID of a DOMAIN CONCEPT! The invalid ID = '"+m[C]+"'",this.$modal.show("fault-popup"),!1;for(u=i[x].ContentSections.split(","),C=0;C<u.length;C++)if(D.indexOf(u[C])<0&&u[C].length>0)return this.faultMessage="A LEARNING ITEM exists with an invalid ID of a CONTENT SECTION! The invalid ID = '"+u[C]+"'",this.$modal.show("fault-popup"),!1}for(x=0;x<o.length;x++){for(m=o[x].DomainConcepts.split(","),C=0;C<m.length;C++)if(I.indexOf(m[C])<0&&m[C].length>0)return this.faultMessage="A LEARNING OUTCOME exists with an invalid ID of a DOMAIN CONCEPT! The invalid ID = '"+m[C]+"'",this.$modal.show("fault-popup"),!1;for(u=o[x].ContentSections.split(","),C=0;C<u.length;C++)if(D.indexOf(u[C])<0&&u[C].length>0)return this.faultMessage="A LEARNING OUTCOME exists with an invalid ID of a CONTENT SECTION! The invalid ID = '"+u[C]+"'",this.$modal.show("fault-popup"),!1;for(p=o[x].LearningItems.split(","),C=0;C<p.length;C++)if(E.indexOf(p[C])<0&&p[C].length>0)return this.faultMessage="A LEARNING OUTCOME exists with an invalid ID of a LEARNING ITEM! The invalid ID = '"+p[C]+"'",this.$modal.show("fault-popup"),!1}for(x=0;x<r.length;x++)if(r[x].learningOutcome.length>0&&N.indexOf(r[x].learningOutcome)<0)return this.faultMessage="An ERROR TYPE exists with an invalid ID of a LEARNING OUTCOME! The invalid ID = '"+r[x].learningOutcome+"'",this.$modal.show("fault-popup"),!1;return[!0,r,o,i,n,t]},createOldIDtoNew:function(e,t){for(var n={},i=0;i<e.length;i++)n[e[i]._id]=t[i]._id;return n},updateDomainSectionIDs:function(e,t){for(var n=e.DomainConcepts.split(","),i=[],o=0;o<n.length;o++)n[o].length>0&&i.push(t[n[o]]);return i},updateContentSectionIDs:function(e,t){for(var n=e.ContentSections.split(","),i=[],o=0;o<n.length;o++)n[o].length>0&&i.push(t[n[o]]);return i},updateLearningItemIDs:function(e,t){for(var n=e.LearningItems.split(","),i=[],o=0;o<n.length;o++)n[o].length>0&&i.push(t[n[o]]);return i},importDomainConcepts:function(e,t){var n=this,i=e.shift(),o=Object(h["a"])({},i);delete o._id,e.length>0?C.a.post("".concat(v.baseURL,"/domainconcept/create"),o).then((function(){n.importDomainConcepts(e,t)})):C.a.post("".concat(v.baseURL,"/domainconcept/create"),o).then((function(){C.a.get("".concat(v.baseURL,"/domainconcept/domainconcepts")).then((function(e){return n.updateNewDomainConcepts(n,e.data),n.importContentSections(Object(p["a"])(t[1]),n.createOldIDtoNew(t[0],n.domainConcepts),t)}))}))},importContentSections:function(e,t,n){var i=this,o=e.shift(),r=Object(h["a"])({},o);delete r._id,r.DomainConcepts=i.updateDomainSectionIDs(r,t),e.length>0?C.a.post("".concat(v.baseURL,"/contentsection/create"),r).then((function(){i.importContentSections(e,t,n)})):C.a.post("".concat(v.baseURL,"/contentsection/create"),r).then((function(){C.a.get("".concat(v.baseURL,"/contentsection/contentsections")).then((function(e){return i.updateNewContentSections(i,e.data),i.importLearningItems(Object(p["a"])(n[2]),t,i.createOldIDtoNew(n[1],i.contentSections),n)}))}))},importLearningItems:function(e,t,n,i){var o=this,r=e.shift(),s=Object(h["a"])({},r);delete s._id,s.DomainConcepts=o.updateDomainSectionIDs(s,t),s.ContentSections=o.updateContentSectionIDs(s,n),e.length>0?C.a.post("".concat(v.baseURL,"/learningitem/create"),s).then((function(){o.importLearningItems(e,t,n,i)})):C.a.post("".concat(v.baseURL,"/learningitem/create"),s).then((function(){C.a.get("".concat(v.baseURL,"/learningitem/learningitems")).then((function(e){return o.updateNewLearningItems(o,e.data),o.importLearningOutcomes(Object(p["a"])(i[3]),t,n,o.createOldIDtoNew(i[2],o.learningItems),i)}))}))},importLearningOutcomes:function(e,t,n,i,o){var r=this,s=e.shift(),a=Object(h["a"])({},s);delete a._id,a.DomainConcepts=r.updateDomainSectionIDs(a,t),a.ContentSections=r.updateContentSectionIDs(a,n),a.LearningItems=r.updateLearningItemIDs(a,i),e.length>0?C.a.post("".concat(v.baseURL,"/learningoutcome/create"),a).then((function(){r.importLearningOutcomes(e,t,n,i,o)})):C.a.post("".concat(v.baseURL,"/learningoutcome/create"),a).then((function(){C.a.get("".concat(v.baseURL,"/learningoutcome/learningoutcomes")).then((function(e){return r.updateNewLearningOutcomes(r,e.data),r.importErrorTypes(Object(p["a"])(o[4]),r.createOldIDtoNew(o[3],r.learningOutcomes),o)}))}))},importErrorTypes:function(e,t,n){var i=this,o=e.shift(),r=Object(h["a"])({},o);delete r._id,r.learningOutcome.length>0&&(r.learningOutcome=t[r.learningOutcome]),e.length>0?C.a.post("".concat(v.baseURL,"/errortype/create"),r).then((function(){i.importErrorTypes(e,t,n)})):C.a.post("".concat(v.baseURL,"/errortype/create"),r).then((function(){C.a.get("".concat(v.baseURL,"/errortype/errortypes")).then((function(e){return i.updateNewErrorTypes(i,e.data)}))}))},isUndefinedOrEmpty:function(e){return void 0==e||e.v.length<1}}},E=D,N=(n("bf9e"),Object(s["a"])(E,u,m,!1,null,null,null)),T=N.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("modal",{staticStyle:{background:"transparent"},attrs:{name:"create-errortype",height:"600"},on:{closed:e.hideErrorType}},[n("div",{staticClass:"col-md-12 form-wrapper",staticStyle:{"text-align":"center"}},[n("br"),n("h2",[e._v(" Create Errortype ")]),n("div",{staticClass:"form-group col-md-12"},[n("label",{attrs:{for:"title"}},[e._v(" Name ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.errorName,expression:"errorName"}],staticClass:"form-control",staticStyle:{border:"2px solid red"},attrs:{type:"text",id:"name",name:"title",placeholder:"Enter name"},domProps:{value:e.errorName},on:{input:[function(t){t.target.composing||(e.errorName=t.target.value)},e.changeInNewErrorType]}})]),n("div",{staticClass:"form-group col-md-12"},[n("label",{attrs:{for:"title"}},[e._v(" Weight ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.errorWeight,expression:"errorWeight"}],staticClass:"form-control",staticStyle:{border:"2px solid red"},attrs:{type:"text",id:"weight",name:"title",placeholder:"Enter weight"},domProps:{value:e.errorWeight},on:{input:[function(t){t.target.composing||(e.errorWeight=t.target.value)},e.changeInNewErrorType]}})]),n("div",{staticClass:"form-group col-md-12"},[n("label",{attrs:{for:"description"}},[e._v(" Description ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.errorDescription,expression:"errorDescription"}],staticClass:"form-control",staticStyle:{border:"2px solid red"},attrs:{type:"text",id:"description",name:"description",placeholder:"Enter description"},domProps:{value:e.errorDescription},on:{input:[function(t){t.target.composing||(e.errorDescription=t.target.value)},e.changeInNewErrorType]}})]),n("label",{attrs:{for:"learningOutcome"}},[e._v(" Learning outcome ")]),n("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[n("div",{staticStyle:{width:"435px",border:"2px solid green",display:"flex","align-items":"center","justify-content":"center"},attrs:{id:"dropdown"}},[n("multiselect",{staticStyle:{width:"435px"},attrs:{"open-direction":"bottom",options:Object.values(e.dropdownLearningOutcomes),maxHeight:180,placeholder:"Select learning outcome"},on:{input:e.changeInNewErrorType},model:{value:e.selectedLearningOutcome,callback:function(t){e.selectedLearningOutcome=t},expression:"selectedLearningOutcome"}})],1)]),n("br"),n("div",{staticClass:"form-group col-md-4 pull-right"},[n("button",{staticClass:"btn btn-success",on:{click:e.pushErrorType}},[e._v(" Create new errortype ")]),n("button",{staticClass:"btn btn-success",attrs:{id:"cancelButton"},on:{click:e.hideErrorType}},[e._v(" Cancel ")])])])]),n("modal",{staticStyle:{background:"transparent"},attrs:{name:"add-text-popup",height:"160",draggable:".window-header"},on:{"before-close":e.pushText}},[n("div",{staticStyle:{"text-align":"center"}},[n("br"),n("h3",[e._v("Type the text:")]),n("textarea",{staticStyle:{"text-align":"center",resize:"none"},attrs:{id:"textarea_freetext",rows:"1",cols:"51",placeholder:"Enter text here"},on:{input:e.updateText}}),n("br"),e._v("   \n            Size:  \n            "),n("input",{staticClass:"slider",attrs:{id:"textSlider",type:"range",min:"10",max:"80",value:"30"},on:{input:e.updateText}})]),n("div",{staticClass:"window-header",attrs:{id:"moveHandle"}},[n("a",[n("p",[n("i",{staticClass:"fas fa-arrows-alt",staticStyle:{"font-size":"50px"}})])])])]),n("modal",{staticStyle:{background:"transparent"},attrs:{name:"edit-text-popup",height:"160",draggable:".window-header"},on:{"before-close":e.unselect}},[n("div",{staticStyle:{"text-align":"center"}},[n("br"),n("h3",[e._v("Edit the text:")]),null!=e.selectedForm?n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.selectedForm.content,expression:"selectedForm.content"}],staticStyle:{"text-align":"center",resize:"none"},attrs:{id:"edit-freetext",rows:"1",cols:"51"},domProps:{value:e.selectedForm.content},on:{input:[function(t){t.target.composing||e.$set(e.selectedForm,"content",t.target.value)},e.editText]}}):e._e(),n("br"),e._v("   \n            Size:  \n            "),null!=e.selectedForm?n("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedForm.height,expression:"selectedForm.height"}],staticClass:"slider",attrs:{id:"textSlider2",type:"range",min:"10",max:"80"},domProps:{value:e.selectedForm.height},on:{input:e.editText,__r:function(t){e.$set(e.selectedForm,"height",t.target.value)}}}):e._e()]),n("div",{staticClass:"window-header",attrs:{id:"moveHandle"}},[n("a",[n("p",[n("i",{staticClass:"fas fa-arrows-alt",staticStyle:{"font-size":"50px"}})])])])]),n("modal",{attrs:{name:"edit-name",height:"290",width:"700"}},[n("div",{staticStyle:{"text-align":"center",color:"white",height:"290px","background-color":"black"}},[n("br"),n("h3",[e._v("Edit name:")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.pdfName,expression:"pdfName"}],staticStyle:{"text-align":"center",resize:"none"},attrs:{id:"export_name",rows:"1",cols:"70"},domProps:{value:e.pdfName},on:{input:function(t){t.target.composing||(e.pdfName=t.target.value)}}}),n("br"),n("h4",[e._v("\n                Add summary to pdf? "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.summaryNeeded,expression:"summaryNeeded"}],attrs:{type:"checkbox",id:"summaryNeeded"},domProps:{checked:Array.isArray(e.summaryNeeded)?e._i(e.summaryNeeded,null)>-1:e.summaryNeeded},on:{change:function(t){var n=e.summaryNeeded,i=t.target,o=!!i.checked;if(Array.isArray(n)){var r=null,s=e._i(n,r);i.checked?s<0&&(e.summaryNeeded=n.concat([r])):s>-1&&(e.summaryNeeded=n.slice(0,s).concat(n.slice(s+1)))}else e.summaryNeeded=o}}})]),n("br"),n("i",{staticClass:"fas fa-file-download",staticStyle:{"font-size":"80px"},on:{click:e.exportPDF}})])]),n("modal",{attrs:{name:"select-error",height:"300",width:"900"},on:{"before-close":e.unselect}},[n("section",{staticClass:"container"},[n("div",{attrs:{id:"left-half"}},[n("br"),n("article",[n("h3",[e._v("Select error:")]),n("div",{staticStyle:{"padding-right":"15px"}},[n("multiselect",{attrs:{id:"dropdown",options:Object.values(e.dropdownErrorTypes),maxHeight:180,placeholder:"Select error"},on:{input:e.updateAnnotation},model:{value:e.selectedErrorType,callback:function(t){e.selectedErrorType=t},expression:"selectedErrorType"}}),n("h3",[n("div",[n("br"),n("p",[e._v("Weight = "+e._s(e.selectedWeight))])])]),n("br"),n("br"),n("button",{staticClass:"btn btn-success",on:{click:e.openErrorTypePopup}},[e._v(" Create new errortype ")])],1)])]),n("div",{attrs:{id:"right-half"}},[n("br"),n("article",[n("h3",[e._v("Give (optional) feedback:")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.feedback_value,expression:"feedback_value"}],staticStyle:{resize:"none"},attrs:{id:"error_feedback",rows:"8",cols:"30"},domProps:{value:e.feedback_value},on:{input:[function(t){t.target.composing||(e.feedback_value=t.target.value)},e.updateAnnotation]}})])])])]),n("div",{attrs:{id:"upload-export"}},[n("a",[n("p",[n("i",{staticClass:"fas fa-file-upload",staticStyle:{"font-size":"80px"},attrs:{id:"upload-button"},on:{click:e.select}}),n("input",{attrs:{type:"file",id:"file-to-upload",accept:"application/pdf"},on:{change:e.upload}}),n("i",{staticClass:"fas fa-file-download",staticStyle:{"font-size":"80px"},on:{click:e.editName}})])])]),n("div",{staticClass:"sidebar"},[n("div",{staticClass:"slidecontainer"},[n("b",{attrs:{href:"#"}},[e._v("___________")]),n("b",{attrs:{href:"#"}},[e._v("- Zoom +")]),n("input",{staticClass:"slider",attrs:{id:"zoomSlider",type:"range",min:"20",max:"99",value:"60"},on:{change:e.updateZoom}}),n("b",{attrs:{href:"#"}},[e._v("___________")])]),n("div",{staticClass:"error-tools"},[n("br"),n("b",{attrs:{href:"#"}},[e._v("Error Tool ")]),n("a",[n("p",[n("i",{staticClass:"fas fa-sticky-note",attrs:{id:"annotation-tool"},on:{click:function(t){e.updateTool("annotation")}}})])]),n("b",{attrs:{href:"#"}},[e._v("___________")])]),n("div",{staticClass:"draw-tools"},[n("br"),n("b",{attrs:{href:"#"}},[e._v("Drawing Tools")]),n("a",[n("p",[n("i",{staticClass:"far fa-circle",attrs:{id:"ellipse-tool"},on:{click:function(t){e.updateTool("ellipse")}}}),e._v(" / \n            "),n("i",{staticClass:"far fa-square",attrs:{id:"rectangle-tool"},on:{click:function(t){e.updateTool("rectangle")}}}),e._v(" / \n            "),n("i",{staticClass:"fas fa-window-minimize",attrs:{id:"line-tool"},on:{click:function(t){e.updateTool("line")}}}),e._v(" / \n            "),n("i",{staticClass:"fas fa-paragraph",attrs:{id:"text-tool"},on:{click:function(t){e.updateTool("text")}}})])]),n("b",{attrs:{href:"#"}},[e._v("Thickness")]),n("b",[n("h2",[n("i",{staticClass:"fas fa-angle-left",on:{click:e.thinner}}),n("p",{staticStyle:{display:"inline"},attrs:{id:"thickness-value"}},[e._v(" 3 ")]),n("i",{staticClass:"fas fa-angle-right",on:{click:e.thicker}})])]),n("b",{attrs:{href:"#"}},[e._v("Colour")]),n("div",{attrs:{id:"colour-part"}},[n("ColorPicker",{attrs:{id:"colour-picker",width:130,height:130,disabled:!1,value:"#ff0000"},on:{"color-change":e.onColorChange}})],1),n("b",{attrs:{href:"#"}},[e._v("___________")])]),n("div",{staticClass:"editing-tools"},[n("br"),n("b",{attrs:{href:"#"}},[e._v("Editing Tools")]),n("a",[n("p",[n("i",{staticClass:"fas fa-trash-alt",attrs:{id:"delete-tool"},on:{click:function(t){e.updateTool("delete")}}}),e._v(" / \n            "),n("i",{staticClass:"fas fa-arrows-alt",attrs:{id:"move-tool"},on:{click:function(t){e.updateTool("move")}}})])]),n("b",{attrs:{href:"#"}},[e._v("___________")])])]),n("div",{attrs:{id:"core"}},[n("div",{attrs:{id:"pdf-and-belongings"}},[n("div",{attrs:{id:"pdf-meta"}},[n("div",{attrs:{id:"name-space"}},[n("h3",[e._v(e._s(e.pdfName.replace(/.pdf/gi,"")))])]),n("div",{attrs:{id:"pdf-buttons"}},[n("br"),n("i",{staticClass:"fas fa-backward",staticStyle:{"font-size":"30px"},on:{click:e.firstPage}}),n("i",{staticClass:"fas fa-arrow-left",staticStyle:{"font-size":"30px"},on:{click:e.previousPage}}),n("i",{staticClass:"fas fa-arrow-right",staticStyle:{"font-size":"30px"},on:{click:e.nextPage}}),n("i",{staticClass:"fas fa-forward",staticStyle:{"font-size":"30px"},on:{click:e.lastPage}})]),e._m(0)]),e._m(1)])]),n("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"},attrs:{id:"circle2"}},[n("circle2")],1),n("div",{attrs:{id:"inner_remaining"}})],1)},O=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h2",{attrs:{id:"page-count-container"}},[n("p",{attrs:{id:"waiting"}}),n("div",{staticStyle:{display:"inline"},attrs:{id:"pdf-current-page"}}),e._v(" / "),n("div",{staticStyle:{display:"inline"},attrs:{id:"pdf-total-pages"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"canvases"}},[n("div",{attrs:{id:"bottom"}},[n("canvas",{attrs:{id:"pdf-canvas",width:"0",height:"0"}})]),n("div",{attrs:{id:"middle"}},[n("canvas",{attrs:{id:"form-holding-canvas",width:"0",height:"0"}})]),n("div",{attrs:{id:"top"}},[n("canvas",{attrs:{id:"draw-canvas",width:"0",height:"0"}})])])}],A=(n("96cf"),n("1da1")),L=(n("a481"),n("6c7b"),n("e511")),R=n.n(L),P=n("1e8a"),k=n("1b98"),U=n("e198"),M=n("aeb1"),$=n.n(M),F={components:{ColorPicker:P["a"],Circle2:I["a"]},data:function(){return{errorName:"",errorWeight:"",errorDescription:"",selectedLearningOutcome:null,learningOutcomes:null,dropdownLearningOutcomes:{},sortedOutcomeIDs:[],selectedErrorType:null,selectedWeight:"?",feedback_value:"",dropdownErrorTypes:{},errorTypes:[],PDF_DOC:void 0,CURRENT_PAGE:1,TOTAL_PAGES:null,DRAW_CANVAS:null,DRAW_CANVAS_CTX:null,PDF_CANVAS:null,PDF_CANVAS_CTX:null,FORM_CANVAS:null,FORM_CANVAS_CTX:null,originalWidth:null,isNewPdf:!0,PDF:null,savedPage:null,savedZoom:null,isExporting:!1,pdfName:"",summaryNeeded:!0,excelNeeded:!0,selectedForm:null,isMouseDown:!1,offsetX:0,offsetY:0,startX:0,startY:0,zoom:1.74,toolMode:"",thickness:3,color:"#ff0000",currentDrawing:{x:0,y:0,width:0,height:0,form:"",colour:"black",thickness:1,selected:!1},learningItems:null,contentSections:null,domainConcepts:null}},mounted:function(){this.DRAW_CANVAS=f()("#draw-canvas").get(0),this.DRAW_CANVAS_CTX=this.DRAW_CANVAS.getContext("2d"),this.PDF_CANVAS=f()("#pdf-canvas").get(0),this.PDF_CANVAS_CTX=this.PDF_CANVAS.getContext("2d"),this.FORM_CANVAS=f()("#form-holding-canvas").get(0),this.FORM_CANVAS_CTX=this.FORM_CANVAS.getContext("2d"),f()("#file-to-upload").hide(),f()("#core").hide(),f()("#circle2").hide(),this.DRAW_CANVAS.addEventListener("mousedown",this.mousedown),this.DRAW_CANVAS.addEventListener("mousemove",this.mousemove),document.addEventListener("mouseup",this.mouseup),f()("#pdf-next, #pdf-prev").attr("disabled","disabled"),f()("#zoomSlider").get(0).disabled=!0,this.$store.getters.get_url.length>0&&(this.FORM_CANVAS.height=this.$store.getters.get_lastHeight,this.FORM_CANVAS.width=this.$store.getters.get_lastWidth,this.pdfName=this.$store.getters.get_pdfName,this.summaryNeeded=JSON.parse(this.$store.getters.get_summary),this.excelNeeded=JSON.parse(this.$store.getters.get_excel),this.isNewPdf=!1,this.zoom=Number(this.$store.getters.get_zoom),f()("#zoomSlider").get(0).value=Number(this.$store.getters.get_sliderValue),this.CURRENT_PAGE=parseInt(this.$store.getters.get_page_number),this.showPDF(JSON.parse(this.$store.getters.get_url),this),this.updateTool(this.$store.getters.get_toolmode),this.thickness=parseInt(this.$store.getters.get_thickness),f()("#thickness-value").get(0).innerHTML=" "+String(this.thickness)+" "),this.fetchErrorTypes(),this.fetchLearningOutcomes(),this.fetchLearningItems()},methods:{__submitToServer:function(e,t){C.a.post("".concat(v.baseURL,"/errortype/create"),e).then((function(){t.fetchErrorTypes()}))},fetchErrorTypes:function(){var e=this;C.a.get("".concat(v.baseURL,"/errortype/errortypes")).then((function(t){return e.updateErrorTypes(e,t.data)}))},fetchLearningOutcomes:function(){var e=this;C.a.get("".concat(v.baseURL,"/learningoutcome/learningoutcomes")).then((function(t){return e.updateLearningOutcomes(e,t.data)}))},fetchLearningItems:function(){var e=this;C.a.get("".concat(v.baseURL,"/learningitem/learningitems")).then((function(t){return e.learningItems=t.data}))},updateLearningOutcomes:function(e,t){var n;for(this.learningOutcomes=t,e.dropdownLearningOutcomes={},e.sortedOutcomeIDs=[],n=0;n<e.learningOutcomes.length;n++)e.dropdownLearningOutcomes[e.learningOutcomes[n]._id]=String(n+1)+": "+String(e.learningOutcomes[n].name),e.sortedOutcomeIDs.push(e.learningOutcomes[n]._id)},updateErrorTypes:function(e,t){e.errorTypes=t,e.dropdownErrorTypes={};var n,i=[];for(n=0;n<e.errorTypes.length;n++)e.dropdownErrorTypes[e.errorTypes[n]._id]=String(n+1)+": "+String(e.errorTypes[n].name),i.push(e.errorTypes[n]._id);var o,r=e.getDrawings();for(n=0;n<r.length;n++)for(o=0;o<r[n].length;o++)"annotation"==r[n][o].form&&(null!=r[n][o].error&&i.indexOf(r[n][o].id)<0?(r[n][o].error=null,r[n][o].weight=0,r[n][o].id=null):null!=r[n][o].error&&i.indexOf(r[n][o].id)>-1&&(r[n][o].error=e.dropdownErrorTypes[r[n][o].id]));this.updateDrawings(r)},atLeastOneSymbol:function(e){f()("#"+e).get(0).value.length<1?f()("#"+e).get(0).setAttribute("style","border: 2px solid red;"):f()("#"+e).get(0).setAttribute("style","border: 2px solid green;")},areAttributesValid:function(e){for(var t=0;t<e.length;t++)if(!(String(f()("#"+e[t]).get(0).style.border).indexOf("green")>=0))return!1;return!0},changeInNewErrorType:function(){this.atLeastOneSymbol("name"),this.atLeastOneSymbol("description");var e=new Set("01234567890"),t=new Set(f()("#weight").get(0).value),n=!0,i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;e.has(l)||(n=!1)}}catch(c){o=!0,r=c}finally{try{i||null==a.return||a.return()}finally{if(o)throw r}}f()("#weight").get(0).value.length<1||!n?f()("#weight").get(0).setAttribute("style","border: 2px solid red;"):f()("#weight").get(0).setAttribute("style","border: 2px solid green;")},pushErrorType:function(){if(this.areAttributesValid(["description","name","weight"])){var e="";null!=this.selectedLearningOutcome&&(e=this.sortedOutcomeIDs[Number(this.selectedLearningOutcome.slice(0,this.selectedLearningOutcome.indexOf(":")))-1]);var t={name:this.errorName,weight:this.errorWeight,description:this.errorDescription,learningOutcome:e};this.__submitToServer(t,this),this.hideErrorType()}},hideErrorType:function(){this.errorName="",this.errorWeight="",this.errorDescription="",this.selectedLearningOutcome=null,this.fetchErrorTypes(),this.$modal.hide("create-errortype"),this.$modal.show("select-error")},openErrorTypePopup:function(){var e=this.getDrawings();this.$modal.hide("select-error"),this.updateDrawings(e),this.$modal.show("create-errortype")},unselect:function(){var e=this.getDrawings(),t=null,n=0;for(n=0;n<e[this.CURRENT_PAGE-1].length;n++)e[this.CURRENT_PAGE-1][n].selected&&(t=e[this.CURRENT_PAGE-1][n]);null!=t&&(t.selected=!1),this.updateDrawings(e)},getDrawings:function(){return JSON.parse(this.$store.getters.get_drawings)},updateDrawings:function(e){this.$store.commit("update_drawings",JSON.stringify(e)),this.redrawAllForms(this.FORM_CANVAS_CTX)},updateText:function(){this.ClearDrawingCanvas(),this.DRAW_CANVAS_CTX.fillStyle=this.color,this.DRAW_CANVAS_CTX.font=String(f()("#textSlider").get(0).value)+"px Consolas",this.DRAW_CANVAS_CTX.fillText(f()("#textarea_freetext").get(0).value,this.startX,this.startY)},editText:function(){var e=this.getDrawings(),t=null,n=0;for(n=0;n<e[this.CURRENT_PAGE-1].length;n++)e[this.CURRENT_PAGE-1][n].selected&&(t=e[this.CURRENT_PAGE-1][n]);this.ClearDrawingCanvas(),t.content=f()("#edit-freetext").get(0).value;var i=this.$store.getters.get_firstZoom/this.zoom;t.height=f()("#textSlider2").get(0).value*i,this.updateDrawings(e)},pushText:function(){if(f()("#textarea_freetext").get(0).value.length>0){var e=this.getDrawings(),t=this.$store.getters.get_firstZoom/this.zoom;e[this.CURRENT_PAGE-1].push({x:this.startX*t,y:this.startY*t,form:"text",colour:this.color,height:f()("#textSlider").get(0).value*t,content:f()("#textarea_freetext").get(0).value}),this.updateDrawings(e),this.ClearDrawingCanvas()}},updateAnnotation:function(){var e=this.getDrawings(),t=null,n=0;for(n=0;n<e[this.CURRENT_PAGE-1].length;n++)e[this.CURRENT_PAGE-1][n].selected&&(t=e[this.CURRENT_PAGE-1][n]);null!=this.selectedErrorType?(t.error=this.selectedErrorType,t.weight=this.errorTypes[parseInt(this.selectedErrorType.slice(0,this.selectedErrorType.indexOf(":")))-1].weight,t.id=this.errorTypes[parseInt(this.selectedErrorType.slice(0,this.selectedErrorType.indexOf(":")))-1]._id):(t.error=null,t.weight=0,t.id=null),t.feedback=f()("#error_feedback").get(0).value,this.selectedWeight=t.weight,this.updateDrawings(e)},onColorChange:function(e){this.color=e},updateTool:function(e){this.unselect(),this.toolMode=e,this.$store.commit("update_toolmode",this.toolMode);var t,n=["ellipse","rectangle","line","delete","move","annotation","text"];for(t=0;t<n.length;t++)f()("#"+n[t]+"-tool").get(0).style.color="#42b983";e.length>1&&(f()("#"+e+"-tool").get(0).style.color="red")},updateZoom:function(){if(void 0!=f()("#zoomSlider").get(0)){var e=f()("#canvases").get(0).clientWidth,t=(e-2)/this.originalWidth;this.zoom=f()("#zoomSlider").get(0).value/(100/t),this.$store.commit("update_zoom",this.zoom),this.$store.commit("update_slider",f()("#zoomSlider").get(0).value),this.CURRENT_PAGE>0&&this.showPage(this.CURRENT_PAGE,!1)}},mousedown:function(e){var t=this,n=t.getDrawings();if(["ellipse","rectangle","line","move"].indexOf(t.toolMode)>=0){var i=t.DRAW_CANVAS.getBoundingClientRect(),o=e.clientX-i.left,r=e.clientY-i.top;t.isMouseDown=!0,t.startX=o,t.startY=r}else if("delete"==t.toolMode){var s=null,a=0;for(a=0;a<n[this.CURRENT_PAGE-1].length;a++)n[this.CURRENT_PAGE-1][a].selected&&(s=a,a=n[this.CURRENT_PAGE-1].length);null!=s&&(n[t.CURRENT_PAGE-1].splice(s,1),this.updateDrawings(n))}else if("text"==t.toolMode){i=t.DRAW_CANVAS.getBoundingClientRect(),o=e.clientX-i.left,r=e.clientY-i.top,t.startX=o,t.startY=r;var l=0;for(a=0;a<n[this.CURRENT_PAGE-1].length;a++)1==n[this.CURRENT_PAGE-1][a].selected&&(++l,this.selectedForm=n[this.CURRENT_PAGE-1][a]);0==l?this.$modal.show("add-text-popup"):1==l&&this.$modal.show("edit-text-popup")}else if("annotation"==t.toolMode){for(l=0,a=0;a<n[this.CURRENT_PAGE-1].length;a++)1==n[this.CURRENT_PAGE-1][a].selected&&(++l,this.selectedForm=n[this.CURRENT_PAGE-1][a]);if(0==l){i=t.DRAW_CANVAS.getBoundingClientRect();var c=e.clientX-i.left,d=e.clientY-i.top,u=this.$store.getters.get_firstZoom/this.zoom,m={x:c*u,y:d*u,width:0,height:0,form:"annotation",colour:"",thickness:"",selected:!1,error:null,feedback:"",id:null,weight:null};n[this.CURRENT_PAGE-1].push(m),t.updateDrawings(n)}else 1==l&&(t.redrawAllForms(t.FORM_CANVAS_CTX),this.selectedErrorType=this.selectedForm.error,this.$modal.show("select-error"),this.feedback_value=this.selectedForm.feedback,this.selectedWeight=this.selectedForm.weight)}},mousemove:function(e){var t=this,n=this.getDrawings();if(t.isMouseDown)switch(t.toolMode){case"ellipse":t.drawEllipse(e);break;case"rectangle":t.drawRectangle(e);break;case"line":t.drawLine(e);break;case"move":var i=null,o=0;for(o=0;o<n[this.CURRENT_PAGE-1].length;o++)n[this.CURRENT_PAGE-1][o].selected&&(i=o,o=n[this.CURRENT_PAGE-1].length);if(null!=i){var r=t.DRAW_CANVAS.getBoundingClientRect(),s=this.$store.getters.get_firstZoom/this.zoom,a=(e.clientX-r.left)*s,l=(e.clientY-r.top)*s;switch(n[this.CURRENT_PAGE-1][i].form){case"line":0==t.offsetX&&0==t.offsetY&&(t.offsetX=n[this.CURRENT_PAGE-1][i].x-a,t.offsetY=n[this.CURRENT_PAGE-1][i].y-l),n[this.CURRENT_PAGE-1][i].width+=a+t.offsetX-n[this.CURRENT_PAGE-1][i].x,n[this.CURRENT_PAGE-1][i].height+=l+t.offsetY-n[this.CURRENT_PAGE-1][i].y;break;default:0==t.offsetX&&0==t.offsetY&&(t.offsetX=n[this.CURRENT_PAGE-1][i].x-a,t.offsetY=n[this.CURRENT_PAGE-1][i].y-l);break}n[this.CURRENT_PAGE-1][i].x=a+t.offsetX,n[this.CURRENT_PAGE-1][i].y=l+t.offsetY,this.updateDrawings(n)}break;default:break}else["delete","move","annotation","text"].indexOf(t.toolMode)>=0&&t.hover(e,t.toolMode)},mouseup:function(){var e=this;if(e.isMouseDown=!1,e.offsetX=0,e.offsetY=0,["ellipse","rectangle","line"].indexOf(e.toolMode)>=0&&(e.currentDrawing.width>0&&e.currentDrawing.height>0||"line"==e.toolMode)){if("line"!=e.toolMode||"line"==e.toolMode&&(e.currentDrawing.x!=e.currentDrawing.width||e.currentDrawing.y!=e.currentDrawing.height)){var t=e.getDrawings();t[this.CURRENT_PAGE-1].push(e.currentDrawing),e.updateDrawings(t)}e.ClearDrawingCanvas(),e.currentDrawing={x:0,y:0,width:0,height:0,form:"",colour:"black",thickness:1}}},drawFormOnCanvas:function(e,t){var n=this.zoom/this.$store.getters.get_firstZoom;switch(e.form){case"ellipse":t.beginPath(),e.selected?(t.lineWidth=e.thickness+3,t.strokeStyle="red"):(t.lineWidth=e.thickness,t.strokeStyle=e.colour),t.ellipse(e.x*n,e.y*n,e.width*n,e.height*n,0,0,2*Math.PI),t.stroke();break;case"rectangle":t.beginPath(),e.selected?(t.lineWidth=e.thickness+3,t.strokeStyle="red"):(t.lineWidth=e.thickness,t.strokeStyle=e.colour),t.rect(e.x*n,e.y*n,e.width*n,e.height*n),t.stroke();break;case"line":t.beginPath(),e.selected?(t.lineWidth=e.thickness+3,t.strokeStyle="red"):(t.lineWidth=e.thickness,t.strokeStyle=e.colour),t.moveTo(e.x*n,e.y*n),t.lineTo(e.width*n,e.height*n),t.stroke();break;case"annotation":if(!this.isExporting){var i=this.DRAW_CANVAS.width,o=0;e.selected&&(o=5);var r=e.x*n,s=e.y*n;t.lineWidth=1,t.beginPath(),t.strokeStyle="red",null!=e.error&&(t.strokeStyle="green"),t.rect(r-o,s-o,i/51.85+2*o,i/34.56+2*o),t.fillStyle=t.strokeStyle,t.fill(),t.stroke(),t.beginPath(),t.strokeStyle="black",e.selected&&(t.strokeStyle="yellow"),t.fillStyle=t.strokeStyle,t.rect(r+i/345.66,s+i/207.4,i/74.07,i/518.5),t.rect(r+i/345.66,s+i/79.769,i/74.07,i/518.5),t.rect(r+i/345.66,s+i/49.38,i/74.07,i/518.5),t.fill(),t.stroke(),e.width=i/51.85,e.height=i/34.56}break;case"text":t.fillStyle=e.colour;var a=0;if(e.selected){var l=e.height*n*e.content.length*.55;t.beginPath(),t.rect(e.x*n,e.y*n-e.height*n*.7,l,e.height*n*.7),t.stroke()}t.font=String(e.height*n+a)+"px Consolas",t.fillText(e.content,e.x*n,e.y*n);break;default:console.log("Form of drawing not recognised");break}},redrawAllForms:function(e){if(!this.isNewPdf){var t;this.ClearAllForms(),0==e&&(e=this.FORM_CANVAS_CTX);var n=this.getDrawings()[this.CURRENT_PAGE-1];for(t=0;t<n.length;t++)this.drawFormOnCanvas(n[t],e)}},hover:function(e,t){var n,i=this.getDrawings(),o=this,r=o.DRAW_CANVAS.getBoundingClientRect(),s=e.clientX-r.left,a=e.clientY-r.top,l=!1,c=0,d=this.zoom/this.$store.getters.get_firstZoom;for(n=0;n<i[this.CURRENT_PAGE-1].length;n++)1==i[this.CURRENT_PAGE-1][n].selected&&++c;for(n=i[this.CURRENT_PAGE-1].length-1;n>=0;n--){var u=i[this.CURRENT_PAGE-1][n],m=!1;switch(u.form){case"ellipse":var h=u.x*d,p=u.y*d,g=u.width*d+5,f=u.height*d+5;m=(s-h)*(s-h)/(g*g)+(a-p)*(a-p)/(f*f)<=1&&"annotation"!=t&&"text"!=t;break;case"rectangle":m=s>=u.x*d-5&&s<=u.x*d+u.width*d+5&&a>=u.y*d-5&&a<=u.y*d+u.height*d+5&&"annotation"!=t&&"text"!=t;break;case"line":var v=u.x*d,_=u.y*d,C=u.width*d,b=u.height*d,y=8,S=Math.abs((b-_)*s-(C-v)*a+C*_-b*v)/Math.sqrt(Math.pow(b-_,2)+Math.pow(C-v,2))<y,w=s>=Math.min(v,C)-y&&s<=Math.max(v,C)+y&&a>=Math.min(_,b)-y&&a<=Math.max(_,b)+y;m=S&&w&&"annotation"!=t&&"text"!=t;break;case"annotation":var I=u.x*d,D=u.y*d,E=this.DRAW_CANVAS.width;m=s>=I-5&&s<=I+E/51.85+5&&a>=D-5&&a<=D+E/34.56+5&&"text"!=t;break;case"text":I=u.x*d,D=u.y*d-u.height*d*.7;var N=u.height*d*u.content.length*.55;m=s>=I-5&&s<=I+N+5&&a>=D-5&&a<=D+u.height*d*.7+5&&"annotation"!=t;break;default:console.log("Form of drawing not recognised");break}1!=u.selected||m||(i[this.CURRENT_PAGE-1][n].selected=!1,this.updateDrawings(i),c-=1,l=!0),0==c&&1!=u.selected&&!l&&m&&(i[this.CURRENT_PAGE-1][n].selected=!0,this.updateDrawings(i),c+=1,l=!0)}l&&this.redrawAllForms(o.FORM_CANVAS_CTX)},drawLine:function(e){var t=this,n=t.DRAW_CANVAS.getBoundingClientRect(),i=e.clientX-n.left,o=e.clientY-n.top,r=this.$store.getters.get_firstZoom/this.zoom;this.ClearDrawingCanvas(),t.DRAW_CANVAS_CTX.beginPath(),t.DRAW_CANVAS_CTX.strokeStyle=this.color,t.DRAW_CANVAS_CTX.lineWidth=t.thickness,t.DRAW_CANVAS_CTX.moveTo(t.startX,t.startY),t.DRAW_CANVAS_CTX.lineTo(i,o),t.DRAW_CANVAS_CTX.stroke(),t.currentDrawing.x=t.startX*r,t.currentDrawing.y=t.startY*r,t.currentDrawing.width=i*r,t.currentDrawing.height=o*r,t.currentDrawing.form="line",t.currentDrawing.thickness=t.thickness,t.currentDrawing.colour=this.color,t.currentDrawing.selected=!1},drawEllipse:function(e){var t=this,n=t.DRAW_CANVAS.getBoundingClientRect(),i=e.clientX-n.left,o=e.clientY-n.top,r=this.$store.getters.get_firstZoom/this.zoom;i-t.startX>0&&o-t.startY>0&&(this.ClearDrawingCanvas(),t.DRAW_CANVAS_CTX.beginPath(),t.DRAW_CANVAS_CTX.strokeStyle=this.color,t.DRAW_CANVAS_CTX.lineWidth=t.thickness,t.DRAW_CANVAS_CTX.ellipse(t.startX+(i-t.startX)/2,t.startY+(o-t.startY)/2,(i-t.startX)/2,(o-t.startY)/2,0,0,2*Math.PI),t.DRAW_CANVAS_CTX.stroke(),t.currentDrawing.x=(t.startX+(i-t.startX)/2)*r,t.currentDrawing.y=(t.startY+(o-t.startY)/2)*r,t.currentDrawing.width=(i-t.startX)/2*r,t.currentDrawing.height=(o-t.startY)/2*r,t.currentDrawing.form="ellipse",t.currentDrawing.thickness=t.thickness,t.currentDrawing.colour=this.color,t.currentDrawing.selected=!1)},drawRectangle:function(e){var t=this,n=t.DRAW_CANVAS.getBoundingClientRect(),i=e.clientX-n.left,o=e.clientY-n.top,r=t.$store.getters.get_firstZoom/t.zoom;i-t.startX>0&&o-t.startY>0&&(this.ClearDrawingCanvas(),t.DRAW_CANVAS_CTX.beginPath(),t.DRAW_CANVAS_CTX.strokeStyle=this.color,t.DRAW_CANVAS_CTX.lineWidth=t.thickness,t.DRAW_CANVAS_CTX.rect(t.startX,t.startY,i-t.startX,o-t.startY),t.DRAW_CANVAS_CTX.stroke(),t.currentDrawing.x=t.startX*r,t.currentDrawing.y=t.startY*r,t.currentDrawing.width=(i-t.startX)*r,t.currentDrawing.height=(o-t.startY)*r,t.currentDrawing.form="rectangle",t.currentDrawing.thickness=t.thickness,t.currentDrawing.colour=this.color,t.currentDrawing.selected=!1)},ClearDrawingCanvas:function(){var e=this;e.DRAW_CANVAS.width=e.DRAW_CANVAS.width},ClearAllForms:function(){var e=this;e.FORM_CANVAS.width=e.FORM_CANVAS.width},editName:function(){f()("#zoomSlider").get(0).disabled||this.isExporting||(this.pdfName=this.$store.getters.get_pdfName,this.summaryNeeded=JSON.parse(this.$store.getters.get_summary),this.excelNeeded=JSON.parse(this.$store.getters.get_excel),this.$modal.show("edit-name"))},exportPDF:function(){if(!f()("#zoomSlider").get(0).disabled&&!this.isExporting){this.$store.commit("update_pdfName",f()("#export_name").get(0).value.replace(/.pdf/gi,"")),this.pdfName=f()("#export_name").get(0).value.replace(/.pdf/gi,""),this.$store.commit("update_summary",JSON.stringify(f()("#summaryNeeded").get(0).checked)),this.summaryNeeded=JSON.parse(this.$store.getters.get_summary),this.excelNeeded=JSON.parse(this.$store.getters.get_excel),this.$modal.hide("edit-name");var e=this;e.savedPage=e.CURRENT_PAGE,e.savedZoom=e.zoom,e.PDF=new R.a,e.showPage(1,!0)}},showPDF:function(e,t){var n=this;this.getDocument(e).then((function(e){t.PDF_DOC=e,t.TOTAL_PAGES=t.PDF_DOC.numPages,f()("#pdf-total-pages").text(t.TOTAL_PAGES),t.showPage(t.CURRENT_PAGE,!1)})).catch((function(e){n.$emit("document-errored",{text:"Failed to retrieve PDF",response:e}),console.log("Failed to retrieve PDF",e)}))},getDocument:function(e){return n.e("pdfjs-dist").then(n.t.bind(null,"fba4",7)).then((function(t){return t.getDocument(e).promise}))},showPage:function(e,t){if(this.isExporting=t,f()("#circle2").show(),f()("#canvases").hide(),this.isNewPdf){var n=[],i=0;for(i=0;i<this.TOTAL_PAGES;i++)n.push([]);this.$store.commit("update_drawings",JSON.stringify(n)),this.isNewPdf=!1,this.firstZoom=null}this.CURRENT_PAGE=e,f()("#pdf-next, #pdf-prev").attr("disabled","disabled"),f()("#zoomSlider").get(0).disabled=!0;var o=this;o.PDF_DOC.getPage(e).then((function(n){var i;f()("#pdf-current-page").text(e),o.originalWidth=n.getViewport({scale:1}).width,t?(f()("#canvases").hide(),f()("#pdf-buttons").hide(),f()("#zoomSlider").get(0).disabled=!0,f()("#waiting").get(0).innerHTML="WAIT FOR EXPORT TO FINISH!",i=n.getViewport({scale:3}),o.zoom=3):i=n.getViewport({scale:o.zoom}),o.PDF_CANVAS.height=i.height,o.PDF_CANVAS.width=i.width,o.FORM_CANVAS.height=i.height,o.FORM_CANVAS.width=i.width,o.DRAW_CANVAS.height=i.height,o.DRAW_CANVAS.width=i.width,o.$store.commit("update_lastWidth",JSON.stringify(i.width)),o.$store.commit("update_lastHeight",JSON.stringify(i.height));var r={canvasContext:o.PDF_CANVAS_CTX,viewport:i};n.render(r).then((function(){if(f()("#pdf-next, #pdf-prev").removeAttr("disabled"),f()("#zoomSlider").get(0).disabled=!1,f()("#core").show(),f()("#circle2").hide(),f()("#canvases").show(),null==o.$store.getters.get_firstZoom){var n=f()("#canvases").get(0).clientWidth,r=(n-2)/o.originalWidth;o.$store.commit("update_firstZoom",f()("#zoomSlider").get(0).value/(100/r)),o.zoom=o.$store.getters.get_firstZoom,o.$store.commit("update_zoom",o.zoom)}if(o.redrawAllForms(o.FORM_CANVAS_CTX),t&&e<o.TOTAL_PAGES){var s;for(o.redrawAllForms(o.PDF_CANVAS_CTX),o.PDF.addImage(o.PDF_CANVAS,"JPEG",0,0,210,297),s=0;s<o.getDrawings()[o.CURRENT_PAGE-1].length;s++){var a=o.getDrawings()[o.CURRENT_PAGE-1][s];o.addAnnotation(a,o,i,o.PDF)}o.PDF.addPage(),o.showPage(o.CURRENT_PAGE+1,!0)}else if(t&&e==o.TOTAL_PAGES-1)o.showPage(o.TOTAL_PAGES,!1);else if(null!=o.PDF&&t){for(o.redrawAllForms(o.PDF_CANVAS_CTX),s=0;s<o.getDrawings()[o.CURRENT_PAGE-1].length;s++)a=o.getDrawings()[o.CURRENT_PAGE-1][s],o.addAnnotation(a,o,i,o.PDF);o.PDF.addImage(o.PDF_CANVAS,"JPEG",0,0,210,297);var l=o.PDF;o.PDF=null,o.PDF=new R.a,JSON.parse(o.$store.getters.get_summary)?(o.addSummary(),o.mergePDFs(l,o.PDF,o.pdfName)):l.save(o.pdfName+".pdf"),o.PDF=null,o.zoom=o.savedZoom,o.CURRENT_PAGE=o.savedPage,f()("#canvases").show(),f()("#pdf-buttons").show(),f()("#waiting").get(0).innerHTML="",f()("#zoomSlider").get(0).disabled=!1,o.showPage(o.CURRENT_PAGE,!1)}}))}))},mergePDFs:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(t,n,i){var o,r,s,a,l,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U["PDFDocument"].create();case 2:return o=e.sent,e.next=5,U["PDFDocument"].load(t.output("arraybuffer"));case 5:return r=e.sent,e.next=8,U["PDFDocument"].load(n.output("arraybuffer"));case 8:return s=e.sent,e.next=11,o.copyPages(r,r.getPageIndices());case 11:return a=e.sent,a.forEach((function(e){return o.addPage(e)})),e.next=15,o.copyPages(s,s.getPageIndices());case 15:return l=e.sent,l.forEach((function(e){return o.addPage(e)})),e.next=19,o.save();case 19:c=e.sent,$()(c,i,"application/pdf");case 21:case"end":return e.stop()}}),e)})));function t(t,n,i){return e.apply(this,arguments)}return t}(),addAnnotation:function(e,t,n,i){if("annotation"==e.form&&!(null==e.error&&e.feedback.length<1)){var o="";o=null==e.error?"No error given.":"Error: "+e.error.slice(e.error.indexOf(":")+2,e.error.length);var r="";r=e.feedback.length<1?"No feedback given.":"Feedback: \n"+e.feedback;var s=t.zoom/t.$store.getters.get_firstZoom;i.createAnnotation({type:"text",title:o,bounds:{x:e.x/n.width*210*s,y:e.y/n.height*297*s,w:10,h:10},contents:r,open:!1})}},addText:function(e,t,n,i,o,r,s){for(var a=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],l=n,c=i,d="",u=e.split(" "),m=0;m<u.length;m++){var h=u[m].length*r*t.getFontSize(),p=(u[m].length+1)*r*t.getFontSize();if(l+h<o&&"/n"!=u[m])d+=u[m]+" ",l+=p;else if(l+h>=o||"/n"==u[m]){a&&t.text(d,n,c);var g=0;"/n"==u[m]&&(g=2,++m),l=n+(u[m].length+1)*r*t.getFontSize(),c+=5+g,d=u[m]+" "}m==u.length-1&&a&&t.text(d,n,c),c+15>287&&(a&&t.addPage(),c=20)}return c+15>287?(a&&t.addPage(),20):c+s},addSummary:function(){var e=this.PDF;e.setFont("courier"),e.setFontSize(15),e.setFontStyle("bold"),e.setTextColor(0,0,255);var t="FEEDBACK REPORT - "+this.pdfName,n=.211818182;e.setTextColor(97,124,146),e.setDrawColor(97,124,146),e.text(t,(210-t.length*n*e.getFontSize())/2,20),e.line((210-t.length*n*e.getFontSize())/2,21,(210-t.length*n*e.getFontSize())/2+t.length*n*e.getFontSize(),21),e.setTextColor(0,0,0),e.setDrawColor(0,0,0),e.setFontSize(10),e.setFontStyle("normal");var i="Here is some background information to help you understand this report better: /n This exercise has been designed to test your achievements of intermediate learning goals of the course and to help identify the possible gaps in your knowledge. /n To do so, we categorize all the errors made in the model according to the knowledge and cognitive levels identified in the Revised Bloom's Taxonomy of educational objectives. Below, you will find the list of key errors made in the requirements analysis and the model itself and some recommendations for improvement of the modelling skills.",o=32,r=10,s=200;o=this.addText(i,e,r,o,s,n,8),e.setFontStyle("bold"),e.text("List of errors",r,o),e.setFontStyle("normal"),o+=8;var a,l,c=!0,d=0;for(l=0;l<this.getDrawings().length;l++)for(a=0;a<this.getDrawings()[l].length;a++){var u=this.getDrawings()[l][a];if("annotation"==u.form&&null!=u.error){var m=u.error.slice(u.error.indexOf(":")+2,u.error.length);o=this.addText("   -",e,r,o,s,n,0),o=this.addText(m,e,r+10,o,s-25,n,5),o=this.addText("weight: "+String(u.weight),e,s-20,o-5,1e4,n,5);var h=u.feedback.replace(" ","");h.length>0&&(o=this.addText("Feedback: "+u.feedback,e,r+15,o,s-25,n,5)),c=!1,d+=parseInt(u.weight)}}o=this.addText("Sum of weights: "+String(d),e,s-37,o+5,1e4,n,5),c&&(o=this.addText("empty",e,r,o,s,n,0),o+=5),o+=3;var p=new Set;for(l=0;l<this.getDrawings().length;l++)for(a=0;a<this.getDrawings()[l].length;a++)u=this.getDrawings()[l][a],"annotation"==u.form&&null!=u.error&&p.add(u.id);p=Array.from(p);var g=new Set;for(a=0;a<this.errorTypes.length;a++)p.indexOf(this.errorTypes[a]._id)>-1&&this.errorTypes[a].learningOutcome.length>0&&g.add(this.errorTypes[a].learningOutcome);g=Array.from(g);var f={},v=[];for(a=0;a<this.learningItems.length;a++)f[this.learningItems[a]._id]=this.learningItems[a].name,v.push(this.learningItems[a]._id);var _=[];for(a=0;a<this.learningOutcomes.length;a++)_.push(this.learningOutcomes[a]._id);var C=new Set,b=new Set;for(a=0;a<this.learningOutcomes.length;a++)if(g.indexOf(this.learningOutcomes[a]._id)>-1)for(l=0;l<this.learningOutcomes[a].LearningItems.length;l++)this.learningItems[v.indexOf(this.learningOutcomes[a].LearningItems[l])].isExerciseItem?b.add(this.learningOutcomes[a].LearningItems[l]):C.add(this.learningOutcomes[a].LearningItems[l]);b=Array.from(b),C=Array.from(C);var y="no content items",S="no exercise items";if(C.length>0&&(y="",1==C.length&&(y="'"+f[C[0]]+"'"),C.length>=2))for(a=0;a<C.length;a++)a<C.length-2?y+="'"+f[C[a]]+"', ":a==C.length-2?y+="'"+f[C[a]]+"' and ":y+="'"+f[C[a]]+"'";if(b.length>0&&(S="",1==b.length&&(S="'"+f[b[0]]+"'"),b.length>=2))for(a=0;a<b.length;a++)a<b.length-2?S+="'"+f[b[a]]+"', ":a==b.length-2?S+="'"+f[b[a]]+"' and ":S+="'"+f[b[a]]+"'";var w="";"no content items"==y&&"no exercise items"==S||(w="These errors indicate that you might need to review: /n "),"no content items"!=y&&(w+="- "+y+" of the course book /n "),"no exercise items"!=S&&(w+="- exercises "+S+" in the online course"),"no content items"==y&&"no exercise items"==S||(o=this.addText(w,e,r,o,s,n,8));var I=10;r=I,o=I;var D=297,E=210,N=75,T=47,x=100,O=75;this.errorTypes.length>0&&(e.addPage("a4","landscape"),e.line(r,o,D-I,o),o+=4,e.setFontStyle("bold"),this.addText("WEIGHT",e,r+N+2,o+1,r+N+T,n,0,!0),this.addText("DESCRIPTION",e,r+N+T+2,o+1,r+N+T+x,n,0,!0),this.addText("LEARNING OUTCOME",e,r+N+T+x+2,o+1,D-I-2,n,0,!0),o=this.addText("NAME",e,r+2,o+1,r+N,n,0,!0),e.setFontStyle("normal"),o+=7,e.line(r,o-4,D-I,o-4));var A=-1;for(a=0;a<this.errorTypes.length;a++){var L=this.errorTypes[a].name,R=String(this.errorTypes[a].weight),P=this.errorTypes[a].description,k=this.errorTypes[a].learningOutcome;k.length>0&&(k=this.learningOutcomes[_.indexOf(k)].name);var U=[];U.push(this.addText(R,e,r+N+2,o+1,r+N+T,n,0,!1)),U.push(this.addText(P,e,r+N+T+2,o+1,r+N+T+x,n,0,!1)),U.push(this.addText(k,e,r+N+T+x+2,o+1,D-I-2,n,0,!1)),U.push(this.addText(L,e,r+2,o+1,r+N,n,0,!1));var M=Math.max.apply(Math,U);if(M>E-I){e.addPage("a4","landscape"),M=M-o+14,o=10,e.line(r,o,D-I,o),o+=4,A=-1,e.setFontStyle("bold"),this.addText("WEIGHT",e,r+N+2,o+1,r+N+T,n,0,!0),this.addText("DESCRIPTION",e,r+N+T+2,o+1,r+N+T+x,n,0,!0),this.addText("LEARNING OUTCOME",e,r+N+T+x+2,o+1,D-I-2,n,0,!0);var $=o;o=this.addText("NAME",e,r+2,o+1,r+N,n,0,!0),e.setFontStyle("normal"),o+=7,M+=o-$,e.line(r,o-4,D-I,o-4)}this.addText(R,e,r+N+2,o+1,r+N+T,n,0,!0),this.addText(P,e,r+N+T+2,o+1,r+N+T+x,n,0,!0),this.addText(k,e,r+N+T+x+2,o+1,D-I-2,n,0,!0),this.addText(L,e,r+2,o+1,r+N,n,0,!0),o=M+7,A<0&&(A=I),e.line(r,o-4,D-I,o-4),e.line(r,A,r,o-4),e.line(r+N,A,r+N,o-4),e.line(r+N+T,A,r+N+T,o-4),e.line(r+N+T+x,A,r+N+T+x,o-4),e.line(r+N+T+x+O,A,r+N+T+x+O,o-4),e.line(D-I,A,D-I,o-4),A=o-4}},createExcel:function(){var e,t,n=[],i=0;for(n.push([{value:"TYPE OF ERROR",type:"string"},{value:"WEIGHT",type:"string"},{value:"FEEDBACK",type:"string"}]),t=0;t<this.getDrawings().length;t++)for(e=0;e<this.getDrawings()[t].length;e++){var o=this.getDrawings()[t][e];if("annotation"==o.form&&!(null==o.error&&o.feedback.length<1)){var r="",s=parseInt(o.weight);null==o.error?(r="No error given.",s=0):r=o.error.slice(o.error.indexOf(":")+2,o.error.length);var a="";a=o.feedback.length<1?"No feedback given.":o.feedback,n.push([{value:r,type:"string"},{value:s,type:"number"},{value:a,type:"string"}]),i+=s}}n.push([{value:"",type:"string"},{value:"Sum: "+String(i),type:"string"}]);var l={filename:this.$store.getters.get_pdfName,sheet:{data:n}};Object(k["a"])(l)},select:function(){this.isExporting||f()("#file-to-upload").trigger("click")},upload:function(){this.isExporting||(this.$store.commit("update_url",JSON.stringify(URL.createObjectURL(f()("#file-to-upload").get(0).files[0]))),this.isNewPdf=!0,f()("#zoomSlider").get(0).value=60,this.CURRENT_PAGE=1,this.$store.commit("update_page_number",1),this.$store.commit("update_drawings",JSON.stringify([])),this.$store.commit("update_pdfName",f()("#file-to-upload").get(0).files[0].name.replace(/.pdf/gi,"")),this.pdfName=f()("#file-to-upload").get(0).files[0].name,this.showPDF(URL.createObjectURL(f()("#file-to-upload").get(0).files[0]),this))},nextPage:function(){this.TOTAL_PAGES>0&&this.CURRENT_PAGE!=this.TOTAL_PAGES&&!f()("#zoomSlider").get(0).disabled&&(this.showPage(++this.CURRENT_PAGE,!1),this.$store.commit("update_page_number",this.CURRENT_PAGE))},previousPage:function(){this.TOTAL_PAGES>0&&1!=this.CURRENT_PAGE&&!f()("#zoomSlider").get(0).disabled&&(this.showPage(--this.CURRENT_PAGE,!1),this.$store.commit("update_page_number",this.CURRENT_PAGE))},firstPage:function(){this.TOTAL_PAGES>0&&1!=this.CURRENT_PAGE&&!f()("#zoomSlider").get(0).disabled&&(this.showPage(1,!1),this.$store.commit("update_page_number",this.CURRENT_PAGE))},lastPage:function(){this.TOTAL_PAGES>0&&this.CURRENT_PAGE!=this.TOTAL_PAGES&&!f()("#zoomSlider").get(0).disabled&&(this.showPage(this.TOTAL_PAGES,!1),this.$store.commit("update_page_number",this.CURRENT_PAGE))},thinner:function(){this.thickness=Math.max(1,this.thickness-1),this.$store.commit("update_thickness",String(this.thickness)),f()("#thickness-value").get(0).innerHTML=" "+String(this.thickness)+" "},thicker:function(){this.thickness=Math.min(5,this.thickness+1),this.$store.commit("update_thickness",String(this.thickness)),f()("#thickness-value").get(0).innerHTML=" "+String(this.thickness)+" "}}},G=F,W=(n("6edb"),Object(s["a"])(G,x,O,!1,null,"53844765",null)),V=W.exports;i["a"].use(d["a"]);var z=new d["a"]({mode:"history",routes:[{path:"/",redirect:{name:"PDF"}},{path:"/database",name:"database",component:T},{path:"/pdf",name:"PDF",component:V}]}),X=n("1881"),B=n.n(X),j=n("8e5f"),Y=n.n(j),H=n("75af"),K=n.n(H),Z=n("c537"),J=n.n(Z),q=n("2f62");i["a"].use(q["a"]);var Q=new q["a"].Store({state:{url:"",page_number:1,firstZoom:null,zoom:"",sliderValue:"60",toolmode:"",thickness:"3",drawings:"[]",lastWidth:"",lastHeight:"",pdfName:"",summary:"true",excel:"true"},mutations:{update_url:function(e,t){e.url=t},update_page_number:function(e,t){e.page_number=t},update_firstZoom:function(e,t){e.firstZoom=t},update_zoom:function(e,t){e.zoom=t},update_slider:function(e,t){e.sliderValue=t},update_toolmode:function(e,t){e.toolmode=t},update_thickness:function(e,t){e.thickness=t},update_drawings:function(e,t){e.drawings=t},update_lastWidth:function(e,t){e.lastWidth=t},update_lastHeight:function(e,t){e.lastHeight=t},update_pdfName:function(e,t){e.pdfName=t},update_summary:function(e,t){e.summary=t},update_excel:function(e,t){e.excel=t}},getters:{get_url:function(e){return e.url},get_page_number:function(e){return e.page_number},get_firstZoom:function(e){return e.firstZoom},get_zoom:function(e){return e.zoom},get_sliderValue:function(e){return e.sliderValue},get_toolmode:function(e){return e.toolmode},get_thickness:function(e){return e.thickness},get_drawings:function(e){return e.drawings},get_lastWidth:function(e){return e.lastWidth},get_lastHeight:function(e){return e.lastHeight},get_pdfName:function(e){return e.pdfName},get_summary:function(e){return e.summary},get_excel:function(e){return e.excel}}});i["a"].component("multiselect",Y.a),i["a"].use(B.a,{dialog:!0}),i["a"].use(K.a),i["a"].use(J.a,{rABS:!1}),i["a"].config.productionTip=!1,new i["a"]({el:"#app",Multiselect:Y.a,store:Q,router:z,render:function(e){return e(c)}}).$mount("#app")},"6edb":function(e,t,n){"use strict";var i=n("fba9"),o=n.n(i);o.a},"72d5":function(e,t,n){},b0a0:function(e,t,n){"use strict";var i=n("07bb"),o=n.n(i);o.a},bf9e:function(e,t,n){"use strict";var i=n("72d5"),o=n.n(i);o.a},fba9:function(e,t,n){}});
//# sourceMappingURL=app.ce07bac4.js.map